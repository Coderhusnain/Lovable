import{u as xe,r as l,j as e,C as X,k as Y,l as Z,m as ee,b as te,n as re,a as _,e as ye,F as ge,A as be,S as je,d as _e,J as $,i as Se,am as Ne}from"./index-Domu0QSH.js";import{I as ve}from"./input-CjLHh5sm.js";import{T as fe}from"./textarea-DkKSvL28.js";import{S as Fe,a as De,b as Ae,c as Ce,d as Pe}from"./select-QzbqEC5l.js";import{L as E}from"./label-DHWdGN-p.js";import{E as we}from"./jspdf.es.min-zKH7-O34.js";import{P as $e,a as Ee,b as Me,C as Be}from"./popover-SZjwgiNs.js";import{_ as f}from"./index-BI27tdbE.js";import{U as Te}from"./UserInfoStep-CfBu40j_.js";import{f as x}from"./format-BEMO4FpZ.js";import"./chevron-left-DLTQHRK5.js";const ke=()=>f.getAllCountries(),Ie=m=>f.getStatesOfCountry(m),se=m=>{const c=f.getAllCountries().find(u=>u.id.toString()===m);return(c==null?void 0:c.name)||`Country ID: ${m}`},ne=(m,c)=>{const u=f.getAllCountries().find(p=>p.id.toString()===m);if(!u)return`State ID: ${c}`;const y=f.getStatesOfCountry(u.id).find(p=>p.id.toString()===c);return(y==null?void 0:y.name)||`State ID: ${c}`},T={state_selection:{id:"state_selection",title:"State Selection",description:"Select the state where the property is located.",fields:[{id:"country",label:"Country",type:"select",options:ke().map(m=>`${m.id}:${m.name}`)},{id:"state",label:"State",type:"select",options:[]}],nextSectionId:"parties"},parties:{id:"parties",title:"Parties Involved",description:"Enter information about the seller and the buyer.",fields:[{id:"seller_name",label:"Seller Name",type:"text",placeholder:"Full Name"},{id:"seller_address",label:"Seller Address",type:"text",placeholder:"Street Address"},{id:"buyer_name",label:"Buyer Name",type:"text",placeholder:"Full Name"},{id:"buyer_address",label:"Buyer Address",type:"text",placeholder:"Street Address"}],nextSectionId:"property"},property:{id:"property",title:"Property Details",description:"Describe the property being sold.",fields:[{id:"property_description",label:"Property Description",type:"textarea",placeholder:"Detailed description of the property"},{id:"schedule_number",label:"Schedule Number",type:"text",placeholder:"Parcel or schedule number"}],nextSectionId:"sale_price"},sale_price:{id:"sale_price",title:"Sale Price",description:"Specify the sale price of the property.",fields:[{id:"numerical_price",label:"Numerical Price",type:"text",placeholder:"e.g., 150000"},{id:"worded_price",label:"Price in Words",type:"text",placeholder:"e.g., One Hundred Fifty Thousand"}],nextSectionId:"agreement_date"},agreement_date:{id:"agreement_date",title:"Agreement Date",description:"Enter the date of the agreement.",fields:[{id:"agreement_date",label:"Agreement Date",type:"date"}],nextSectionId:"signing_date"},signing_date:{id:"signing_date",title:"Signing Date",description:"Enter the date of signing.",fields:[{id:"signing_date",label:"Signing Date",type:"date"}],nextSectionId:"investment_end_date"},investment_end_date:{id:"investment_end_date",title:"Investment End Date",description:"Enter the investment end date.",fields:[{id:"investment_end_date",label:"Investment End Date",type:"date"}],nextSectionId:"seller_notice"},seller_notice:{id:"seller_notice",title:"Seller Notice Information",description:"Enter the seller's notice information.",fields:[{id:"seller_notice_address",label:"Seller Notice Address",type:"text",placeholder:"Street Address"},{id:"seller_notice_phone",label:"Seller Notice Phone",type:"text",placeholder:"Phone Number"},{id:"seller_notice_email",label:"Seller Notice Email",type:"text",placeholder:"Email Address"}],nextSectionId:"buyer_notice"},buyer_notice:{id:"buyer_notice",title:"Buyer Notice Information",description:"Enter the buyer's notice information.",fields:[{id:"buyer_notice_address",label:"Buyer Notice Address",type:"text",placeholder:"Street Address"},{id:"buyer_notice_phone",label:"Buyer Notice Phone",type:"text",placeholder:"Phone Number"},{id:"buyer_notice_email",label:"Buyer Notice Email",type:"text",placeholder:"Email Address"}],nextSectionId:"arbitration"},arbitration:{id:"arbitration",title:"Arbitration Details",description:"Enter details about the arbitration process.",fields:[{id:"arbitration_jurisdiction",label:"Jurisdiction",type:"text",placeholder:"e.g., County, State"},{id:"arbitrator_name",label:"Arbitrator Name",type:"text",placeholder:"Name of Arbitrator"},{id:"umpire_name",label:"Umpire Name",type:"text",placeholder:"Name of Umpire"}],nextSectionId:"confirmation"},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm the information.",fields:[],nextSectionId:null},user_info_step:{id:"user_info_step",title:"User Information",description:"Please provide your contact information to generate the document.",fields:[],nextSectionId:null}},Ke=()=>{const m=xe(),[c,u]=l.useState("state_selection"),[h,y]=l.useState({}),[p,F]=l.useState(["state_selection"]),[ie,k]=l.useState(!1),[ae,I]=l.useState(!1),[D,L]=l.useState({name:"",address:""}),[A,O]=l.useState({name:"",address:""}),[C,U]=l.useState({description:"",scheduleNumber:""}),[P,G]=l.useState({numerical:"",worded:""}),[g,z]=l.useState({address:"",phone:"",email:""}),[b,H]=l.useState({address:"",phone:"",email:""}),[j,J]=l.useState({jurisdiction:"",arbitratorName:"",umpireName:""}),[S,R]=l.useState(),[N,V]=l.useState(),[v,W]=l.useState(),d=T[c],oe=()=>{try{const t=d==null?void 0:d.nextSectionId;if(!t){c==="confirmation"?(u("user_info_step"),F([...p,"user_info_step"])):k(!0);return}T[t]?(F([...p,t]),u(t)):(console.error(`Next section ${t} does not exist`),$.error("Navigation error. Please try again."))}catch(t){console.error("Error in handleNext:",t),$.error("An error occurred. Please try again.")}},q=()=>{if(p.length>1){const t=[...p];t.pop(),F(t),u(t[t.length-1])}},K=async()=>{var t,a,n;I(!0);try{const s=new we;s.setFontSize(12),s.setFont("helvetica","normal");let r=30;const i=(B,he,pe,ue={})=>{const Q=s.splitTextToSize(B,180);return s.text(Q,he,pe,ue),Q.length*7};s.setFontSize(18),s.setFont("helvetica","bold"),s.text("AGREEMENT TO SELL",105,r,{align:"center"}),r+=20,s.setFontSize(12),s.setFont("helvetica","normal");const o=se(((t=h.country)==null?void 0:t.split(":")[0])||""),M=ne(((a=h.country)==null?void 0:a.split(":")[0])||"",((n=h.state)==null?void 0:n.split(":")[0])||"");r+=i(`This Agreement is made and entered into as of the signing date, between the parties listed below and pertaining to property located in the State of ${M}, ${o}.`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Parties:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Seller: ${D.name}, residing at ${D.address}`,20,r),r+=i(`Buyer: ${A.name}, residing at ${A.address}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Property:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Description: ${C.description}`,20,r),r+=i(`Schedule Number: ${C.scheduleNumber}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Sale Price:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Numerical Price: $${P.numerical}`,20,r),r+=i(`Price in Words: ${P.worded}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Agreement Date:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Date: ${S?x(S,"MMMM dd, yyyy"):"Not specified"}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Signing Date:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Date: ${N?x(N,"MMMM dd, yyyy"):"Not specified"}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Investment End Date:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Date: ${v?x(v,"MMMM dd, yyyy"):"Not specified"}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Seller Notice Information:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Address: ${g.address}`,20,r),r+=i(`Phone: ${g.phone}`,20,r),r+=i(`Email: ${g.email}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Buyer Notice Information:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Address: ${b.address}`,20,r),r+=i(`Phone: ${b.phone}`,20,r),r+=i(`Email: ${b.email}`,20,r),r+=15,s.setFont("helvetica","bold"),s.text("Arbitration Details:",20,r),r+=10,s.setFont("helvetica","normal"),r+=i(`Jurisdiction: ${j.jurisdiction}`,20,r),r+=i(`Arbitrator Name: ${j.arbitratorName}`,20,r),r+=i(`Umpire Name: ${j.umpireName}`,20,r),r+=15,s.save("agreement-to-sell.pdf"),$.success("Agreement to Sell PDF generated successfully!")}catch(s){console.error("Error generating PDF:",s),$.error("Failed to generate Agreement to Sell PDF")}finally{I(!1)}},w=(t,a)=>{y(n=>({...n,[t]:a})),t==="country"&&y(n=>({...n,state:""})),t==="seller_name"||t==="seller_address"?L(n=>({...n,[t.replace("seller_","")]:a})):t==="buyer_name"||t==="buyer_address"?O(n=>({...n,[t.replace("buyer_","")]:a})):t==="property_description"||t==="schedule_number"?U(n=>({...n,[t.replace("property_","")]:a})):t==="numerical_price"||t==="worded_price"?G(n=>({...n,[t.replace("price_","")]:a})):t==="seller_notice_address"||t==="seller_notice_phone"||t==="seller_notice_email"?z(n=>({...n,[t.replace("seller_notice_","")]:a})):t==="buyer_notice_address"||t==="buyer_notice_phone"||t==="buyer_notice_email"?H(n=>({...n,[t.replace("buyer_notice_","")]:a})):(t==="arbitration_jurisdiction"||t==="arbitrator_name"||t==="umpire_name")&&J(n=>({...n,[t.replace("arbitration_","")]:a}))},le=t=>{if(!t)return[];const a=parseInt(t.split(":")[0]);return Ie(a).map(s=>`${s.id}:${s.name}`)},de=t=>{const a=h[t.id]||"";switch(t.type){case"text":return e.jsxs("div",{children:[e.jsx(E,{htmlFor:t.id,children:t.label}),e.jsx(ve,{type:"text",id:t.id,placeholder:t.placeholder,value:a,onChange:o=>w(t.id,o.target.value)})]},t.id);case"textarea":return e.jsxs("div",{children:[e.jsx(E,{htmlFor:t.id,children:t.label}),e.jsx(fe,{id:t.id,placeholder:t.placeholder,value:a,onChange:o=>w(t.id,o.target.value),rows:4})]},t.id);case"select":let n=t.id==="state"?le(h.country):t.options||[];return e.jsxs("div",{children:[e.jsx(E,{htmlFor:t.id,children:t.label}),e.jsxs(Fe,{onValueChange:o=>w(t.id,o),defaultValue:a,disabled:t.id==="state"&&!h.country,children:[e.jsx(De,{className:"w-full",children:e.jsx(Ae,{placeholder:`Select ${t.label.toLowerCase()}...`})}),e.jsx(Ce,{children:n.map(o=>{const[M,B]=o.split(":");return e.jsx(Pe,{value:o,children:B},M)})})]})]},t.id);case"date":const[s,r]=l.useState(t.id==="agreement_date"?S:t.id==="signing_date"?N:t.id==="investment_end_date"?v:void 0),i=o=>{r(o),w(t.id,o?x(o,"yyyy-MM-dd"):""),t.id==="agreement_date"?R(o):t.id==="signing_date"?V(o):t.id==="investment_end_date"&&W(o)};return e.jsxs("div",{children:[e.jsx(E,{htmlFor:t.id,children:t.label}),e.jsxs($e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:Se("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),s?x(s,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(Me,{className:"w-auto p-0",align:"start",children:e.jsx(Be,{mode:"single",selected:s,onSelect:i,disabled:o=>o>new Date,initialFocus:!0})})]})]},t.id);default:return null}},ce=()=>d?e.jsx("div",{className:"space-y-4",children:d.fields.map(t=>de(t))}):e.jsx("div",{children:"Section not found."}),me=()=>{var n,s,r;const t=se(((n=h.country)==null?void 0:n.split(":")[0])||""),a=ne(((s=h.country)==null?void 0:s.split(":")[0])||"",((r=h.state)==null?void 0:r.split(":")[0])||"");return e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"}),e.jsx("br",{}),"Country: ",t,e.jsx("br",{}),"State: ",a]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Parties:"}),e.jsx("br",{}),"Seller: ",D.name," (",D.address,")",e.jsx("br",{}),"Buyer: ",A.name," (",A.address,")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Property:"}),e.jsx("br",{}),"Description: ",C.description,e.jsx("br",{}),"Schedule Number: ",C.scheduleNumber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Sale Price:"}),e.jsx("br",{}),"Numerical: ",P.numerical,e.jsx("br",{}),"Worded: ",P.worded]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Agreement Date:"}),e.jsx("br",{}),S?x(S,"MMMM dd, yyyy"):"Not specified"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signing Date:"}),e.jsx("br",{}),N?x(N,"MMMM dd, yyyy"):"Not specified"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Investment End Date:"}),e.jsx("br",{}),v?x(v,"MMMM dd, yyyy"):"Not specified"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Seller Notice:"}),e.jsx("br",{}),"Address: ",g.address,e.jsx("br",{}),"Phone: ",g.phone,e.jsx("br",{}),"Email: ",g.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Buyer Notice:"}),e.jsx("br",{}),"Address: ",b.address,e.jsx("br",{}),"Phone: ",b.phone,e.jsx("br",{}),"Email: ",b.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Arbitration:"}),e.jsx("br",{}),"Jurisdiction: ",j.jurisdiction,e.jsx("br",{}),"Arbitrator: ",j.arbitratorName,e.jsx("br",{}),"Umpire: ",j.umpireName]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsx("p",{className:"text-center mb-2",children:"By generating this document, you confirm the accuracy of the information provided. This document will serve as your official Agreement to Sell."})})]})};return c==="user_info_step"?e.jsx(Te,{onBack:q,onGenerate:K,documentType:"Agreement to Sell",isGenerating:ae}):ie?e.jsx("div",{className:"bg-gray-50 min-h-0 bg-white rounded-lg shadow-sm",children:e.jsxs(X,{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-sm",children:[e.jsxs(Y,{className:"text-center",children:[e.jsx(Z,{className:"text-xl text-green-600",children:"Agreement to Sell"}),e.jsx(ee,{children:"Review your Agreement to Sell details below before generating the final document."})]}),e.jsx(te,{className:"space-y-4",children:me()}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx(_,{variant:"outline",onClick:()=>{u("state_selection"),y({}),F(["state_selection"]),k(!1),L({name:"",address:""}),O({name:"",address:""}),U({description:"",scheduleNumber:""}),G({numerical:"",worded:""}),z({address:"",phone:"",email:""}),H({address:"",phone:"",email:""}),J({jurisdiction:"",arbitratorName:"",umpireName:""}),R(void 0),V(void 0),W(void 0)},children:"Start Over"}),e.jsxs(_,{onClick:K,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Generate PDF"]})]})]})}):e.jsx("div",{className:"bg-gray-50 min-h-0 bg-white rounded-lg shadow-sm p-4",children:e.jsxs(X,{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-sm",children:[e.jsxs(Y,{children:[e.jsx(Z,{className:"text-xl",children:d==null?void 0:d.title}),e.jsxs(ee,{children:[d==null?void 0:d.description,e.jsxs("div",{className:"mt-2 text-sm",children:["Section ",p.indexOf(c)+1," of ",Object.keys(T).length-2]})]}),c==="state_selection"&&e.jsx("div",{className:"mt-3",children:e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>m("/agreement-to-sell-info"),className:"text-orange-600 border-orange-200 hover:bg-orange-50 hover:border-orange-300",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Learn More About Agreements to Sell"]})})]}),e.jsx(te,{className:"text-black",children:ce()}),e.jsxs(re,{className:"flex justify-between",children:[e.jsxs(_,{variant:"outline",onClick:q,disabled:p.length<=1,children:[e.jsx(be,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx(_,{onClick:oe,children:(d==null?void 0:d.nextSectionId)===null?e.jsxs(e.Fragment,{children:["Complete ",e.jsx(je,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Next ",e.jsx(_e,{className:"w-4 h-4 ml-2"})]})})]})]})})};export{Ke as default};
