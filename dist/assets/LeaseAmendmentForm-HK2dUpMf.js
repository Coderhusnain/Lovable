import{u as se,r as y,j as e,C as v,k as P,l as T,m as D,b as S,n as F,a as h,F as re,A as ie,S as oe,d as le,J as N,e as de,i as ce,ak as me}from"./index-BAEAUopf.js";import{I as E}from"./input-DnI_Xo94.js";import{T as _e}from"./textarea-BT3hIsff.js";import{S as $,a as O,b as M,c as R,d as H}from"./select-DKAljqaC.js";import{L as g}from"./label-BeQ78mSL.js";import{E as he}from"./jspdf.es.min-CPP5zEfz.js";import{P as xe,a as ue,b as pe,C as ge}from"./popover-HE7mUwHc.js";import{_ as b}from"./index-BV7iVDwO.js";import{f}from"./format-BEMO4FpZ.js";import"./chevron-left-B3KxxXjI.js";const I=()=>b.getAllCountries(),fe=i=>b.getStatesOfCountry(i),ye=i=>{const r=b.getAllCountries().find(o=>o.id.toString()===i);return(r==null?void 0:r.name)||`Country ID: ${i}`},be=(i,r)=>{const o=b.getAllCountries().find(l=>l.id.toString()===i);if(!o)return`State ID: ${r}`;const x=b.getStatesOfCountry(o.id).find(l=>l.id.toString()===r);return(x==null?void 0:x.name)||`State ID: ${r}`},w={location_selection:{id:"location_selection",title:"Location Selection",description:"Select the country and state where this lease amendment will be executed",questions:["country","state"],nextSectionId:"amendment_date"},amendment_date:{id:"amendment_date",title:"Amendment Date",description:"Enter the date of this lease amendment",questions:["amendment_date"],nextSectionId:"parties_info"},parties_info:{id:"parties_info",title:"Parties Information",description:"Enter the landlord and tenant information",questions:["landlord_name","tenant_name"],nextSectionId:"original_lease"},original_lease:{id:"original_lease",title:"Original Lease Details",description:"Information about the original lease agreement",questions:["original_lease_date","property_address","property_city","property_county"],nextSectionId:"amendments"},amendments:{id:"amendments",title:"Amendment Details",description:"Specify the changes being made to the lease",questions:["amendment_details","recording_county_state"],nextSectionId:"confirmation"},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm your information",questions:["confirmation"]}},je={country:{id:"country",type:"select",text:"Select your country:",options:I().map(i=>`${i.id}|${i.name}`),defaultNextId:"state"},state:{id:"state",type:"select",text:"Select your state/province:",options:[],defaultNextId:"amendment_date"},amendment_date:{id:"amendment_date",type:"date",text:"Date of this Lease Amendment:",defaultNextId:"landlord_name"},landlord_name:{id:"landlord_name",type:"text",text:"Landlord's Full Name:",defaultNextId:"tenant_name"},tenant_name:{id:"tenant_name",type:"text",text:"Tenant's Full Name:",defaultNextId:"original_lease_date"},original_lease_date:{id:"original_lease_date",type:"date",text:"Original Lease Agreement Date:",defaultNextId:"property_address"},property_address:{id:"property_address",type:"text",text:"Property Street Address:",defaultNextId:"property_city"},property_city:{id:"property_city",type:"text",text:"Property City, State, ZIP Code:",defaultNextId:"property_county"},property_county:{id:"property_county",type:"text",text:"Property County:",defaultNextId:"amendment_details"},amendment_details:{id:"amendment_details",type:"textarea",text:"Specific Amendment Details (e.g., updated rent amount, extension of lease term, modified utility responsibilities, etc.):",defaultNextId:"recording_county_state"},recording_county_state:{id:"recording_county_state",type:"text",text:"County and State for Recording (if applicable):",defaultNextId:"confirmation"},confirmation:{id:"confirmation",type:"confirmation",text:"Thank you for providing the information. We will generate your Lease Amendment based on your answers."}},Re=()=>{const i=se(),[r,o]=y.useState("location_selection"),[a,x]=y.useState({}),[l,j]=y.useState(["location_selection"]),[z,C]=y.useState(!1),[A,B]=y.useState({}),d=w[r],V=()=>{try{const t=d==null?void 0:d.nextSectionId;if(!t){C(!0);return}w[t]?(j([...l,t]),o(t)):(console.error(`Next section ${t} does not exist`),N.error("Navigation error. Please try again."))}catch(t){console.error("Error in handleNext:",t),N.error("An error occurred. Please try again.")}},W=()=>{if(l.length>1){const t=[...l];t.pop(),j(t),o(t[t.length-1])}},c=(t,n)=>{x({...a,[t]:n})},L=(t,n)=>{B({...A,[t]:n})},G=t=>{const n=je[t];switch(n.type){case"text":return e.jsxs("div",{className:"mb-2",children:[e.jsx(g,{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsx(E,{id:t,value:a[t]||"",onChange:s=>c(t,s.target.value),placeholder:"Type your answer",className:"mt-1 text-black w-full bg-white"})]});case"number":return e.jsxs("div",{className:"mb-2",children:[e.jsx(g,{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsx(E,{id:t,type:"number",value:a[t]||"",onChange:s=>c(t,s.target.value),placeholder:"Enter number",className:"mt-1 text-black w-full bg-white"})]});case"textarea":return e.jsxs("div",{className:"mb-2",children:[e.jsx(g,{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsx(_e,{id:t,value:a[t]||"",onChange:s=>c(t,s.target.value),placeholder:"Describe the specific changes being made to the lease",className:"mt-1 text-black w-full bg-white",rows:4})]});case"date":return e.jsxs("div",{className:"mb-2",children:[e.jsx(g,{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsxs(xe,{open:A[t]||!1,onOpenChange:s=>L(t,s),children:[e.jsx(ue,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:ce("w-full justify-start text-left font-normal mt-1 text-black bg-white",!a[t]&&"text-muted-foreground"),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),a[t]?f(new Date(a[t]),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(pe,{className:"w-auto p-0 bg-white",align:"start",children:e.jsx(ge,{mode:"single",selected:a[t]?new Date(a[t]):void 0,onSelect:s=>{s&&(c(t,s.toISOString()),L(t,!1))},initialFocus:!0})})]})]});case"select":if(t==="country")return e.jsxs("div",{className:"mb-2",children:[e.jsx(g,{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsxs($,{value:a[t]||"",onValueChange:s=>{c(t,s),a.state&&c("state","")},children:[e.jsx(O,{className:"mt-1 text-black w-full bg-white",children:e.jsx(M,{placeholder:"Select a country"})}),e.jsx(R,{className:"bg-white",children:I().map(s=>e.jsx(H,{value:`${s.id}`,children:s.name},s.id))})]})]});if(t==="state"){const s=a.country,m=s?fe(parseInt(s)):[];return e.jsxs("div",{className:"mb-2",children:[e.jsx(g,{htmlFor:t,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsxs($,{value:a[t]||"",onValueChange:u=>c(t,u),disabled:!s,children:[e.jsx(O,{className:"mt-1 text-black w-full bg-white",children:e.jsx(M,{placeholder:s?"Select a state/province":"Select a country first"})}),e.jsx(R,{className:"bg-white",children:m.map(u=>e.jsx(H,{value:`${u.id}`,children:u.name},u.id))})]})]})}break;case"confirmation":return e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx(de,{className:"h-12 w-12 text-green-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-black",children:n.text})]});default:return null}},J=()=>d.questions.map(t=>G(t)),Q=()=>r==="confirmation"?!0:r==="location_selection"?a.country&&a.state:r==="amendment_date"?a.amendment_date:r==="parties_info"?a.landlord_name&&a.tenant_name:r==="original_lease"?a.original_lease_date&&a.property_address&&a.property_city&&a.property_county:r==="amendments"?a.amendment_details:!0,Z=()=>{try{console.log("Generating Lease Amendment PDF...");const t=new he;t.setFont("helvetica","bold"),t.setFontSize(16),t.text("LEASE AMENDMENT",105,20,{align:"center"}),t.setFont("helvetica","normal"),t.setFontSize(11);let n=35;const s=6,m=280,K=`This Lease Amendment ("Amendment") is made and entered into on ${a.amendment_date?f(new Date(a.amendment_date),"MMMM d, yyyy"):"[Insert Date]"}, by and between ${a.landlord_name||"[Landlord's Full Name]"} ("Landlord")`;t.splitTextToSize(K,170).forEach(_=>{t.text(_,15,n),n+=s}),n+=s,t.setFont("helvetica","bold"),t.text("And",15,n),n+=s+3,t.setFont("helvetica","normal"),t.text(`${a.tenant_name||"[Tenant's Full Name]"} ("Tenant") (collectively referred to as the "Parties").`,15,n),n+=s+10,t.setFont("helvetica","bold"),t.text("Background",15,n),n+=s+5,t.setFont("helvetica","normal");const X=a.original_lease_date?f(new Date(a.original_lease_date),"MMMM d, yyyy"):"[Insert Original Lease Date]",Y=`${a.property_address||"[Street Address]"}, ${a.property_city||"[City, State, ZIP Code]"}`,q=`The Parties previously entered into a Lease Agreement dated ${X} (the "Lease"), under which the Tenant leased from the Landlord the property located at ${Y}, as further described in the Lease.`;t.splitTextToSize(q,170).forEach(_=>{n>m-20&&(t.addPage(),n=20),t.text(_,15,n),n+=s}),n+=s+3,t.splitTextToSize("The Parties now wish to amend the Lease under the terms set forth in this Amendment.",170).forEach(_=>{n>m-20&&(t.addPage(),n=20),t.text(_,15,n),n+=s}),n+=s+10;const p=(_,ne)=>{n>m-40&&(t.addPage(),n=20),t.setFont("helvetica","bold"),t.text(_,15,n),n+=s+3,t.setFont("helvetica","normal"),t.splitTextToSize(ne,170).forEach(ae=>{n>m-20&&(t.addPage(),n=20),t.text(ae,15,n),n+=s}),n+=s+5};p("1. Confirmation of Existing Lease","The Parties acknowledge that the Lease is currently valid and in full effect and that neither party is in breach or default of any of its terms.");const ee=a.amendment_details||"[Insert specific amendment(s) here, e.g., updated rent amount, extension of lease term, modified utility responsibilities, etc.]";p("2. Amendments",`The Lease is hereby amended as follows:

${ee}`),p("3. Remaining Provisions Unaffected","Except as expressly amended in this Agreement, all other terms, covenants, and provisions of the original Lease shall remain unchanged and in full force and effect. The Parties reaffirm their agreement to the Lease, as modified by this Amendment.");const te=a.recording_county_state||"[Insert County and State]";p("4. Recordation (Optional)",`This Amendment may be recorded at the discretion of either party. Alternatively, the Parties may prepare and execute a short-form memorandum of this Amendment to be recorded in the Register's Office of ${te}.`),p("5. Conflict","If any provision in this Amendment conflicts with any term or condition of the original Lease, the terms of this Amendment shall prevail and control."),p("6. Binding Effect","This Amendment shall be binding upon and shall inure to the benefit of the Parties and their respective successors and assigns. However, nothing in this clause shall be construed to permit assignment of the Lease by the Tenant unless otherwise authorized by the original Lease."),n>m-100&&(t.addPage(),n=20),t.setFont("helvetica","bold"),t.text("IN WITNESS WHEREOF, the Parties have executed this Lease Amendment as of the date first written above.",15,n),n+=s+15,t.text("LANDLORD:",15,n),n+=s+10,t.setFont("helvetica","normal"),t.text("Signature: ___________________________",15,n),n+=s+5,t.text("Name: ______________________________",15,n),n+=s+5,t.text("Date: _______________________________",15,n),n+=s+15,t.setFont("helvetica","bold"),t.text("TENANT:",15,n),n+=s+10,t.setFont("helvetica","normal"),t.text("Signature: ___________________________",15,n),n+=s+5,t.text("Name: ______________________________",15,n),n+=s+5,t.text("Date: _______________________________",15,n);const k=`lease_amendment_${f(new Date,"yyyyMMdd_HHmmss")}.pdf`;return console.log("Saving PDF with filename:",k),t.save(k),N.success("Lease Amendment successfully generated!"),t}catch(t){return console.error("Error generating PDF:",t),N.error("Failed to generate Lease Amendment"),null}},U=()=>e.jsxs("div",{className:"space-y-2 text-black",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Lease Amendment Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Amendment Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",a.country?ye(a.country):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"State/Province:"})," ",a.state?be(a.country||"",a.state):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amendment Date:"})," ",a.amendment_date?f(new Date(a.amendment_date),"PPP"):"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Parties"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Landlord:"})," ",a.landlord_name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tenant:"})," ",a.tenant_name||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Original Lease"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lease Date:"})," ",a.original_lease_date?f(new Date(a.original_lease_date),"PPP"):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Property:"})," ",a.property_address||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",a.property_city||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"County:"})," ",a.property_county||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Amendment Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Changes:"})," ",a.amendment_details?a.amendment_details.length>100?a.amendment_details.substring(0,100)+"...":a.amendment_details:"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recording Location:"})," ",a.recording_county_state||"Not provided"]})]})]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/10",children:e.jsx("p",{className:"text-center mb-2",children:"By generating this document, you confirm the accuracy of the information provided. This document will serve as your official Lease Amendment."})})]});return z?e.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:e.jsxs(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:[e.jsxs(P,{className:"text-center",children:[e.jsx(T,{className:"text-xl text-green-600",children:"Lease Amendment"}),e.jsx(D,{children:"Review your Lease Amendment details below before generating the final document."})]}),e.jsx(S,{className:"space-y-2",children:U()}),e.jsxs(F,{className:"flex justify-between",children:[e.jsx(h,{variant:"outline",onClick:()=>{x({}),j(["location_selection"]),o("location_selection"),C(!1)},className:"mt-2",children:"Start Over"}),e.jsx(h,{onClick:Z,children:"Generate Lease Amendment"})]})]})}):d?e.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:e.jsxs(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:[e.jsxs(P,{children:[e.jsx(T,{className:"text-xl",children:d.title}),e.jsxs(D,{children:[d.description,r==="location_selection"&&e.jsx("div",{className:"mt-3 flex left-0",children:e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>i("/lease-amendment-info"),className:"text-orange-600 border-orange-600 hover:bg-orange-50",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Learn More About Lease Amendment"]})}),e.jsxs("div",{className:"mt-2 text-sm",children:["Step ",l.length," of ",Object.keys(w).length]})]})]}),e.jsx(S,{className:"text-black",children:e.jsx("div",{className:"grid grid-cols-1 gap-y-2",children:J()})}),e.jsxs(F,{className:"flex justify-between",children:[e.jsxs(h,{variant:"outline",onClick:W,disabled:l.length<=1,children:[e.jsx(ie,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx(h,{onClick:()=>V(),disabled:!Q(),children:r==="confirmation"?e.jsxs(e.Fragment,{children:["Complete ",e.jsx(oe,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Next ",e.jsx(le,{className:"w-4 h-4 ml-2"})]})})]})]})}):e.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:e.jsx(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:e.jsxs(S,{className:"text-center p-4",children:[e.jsx("p",{className:"text-red-500",children:"An error occurred. Please refresh the page."}),e.jsx(h,{onClick:()=>{o("location_selection"),j(["location_selection"])},className:"mt-2",children:"Start Over"})]})})})};export{Re as default};
