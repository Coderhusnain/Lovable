import{r as u,j as e,C as M,k as q,l as X,m as Z,b as W,n as ee,a as v,F as ue,A as pe,S as fe,d as ge,J as P,e as ye,i as we,ak as je}from"./index-Bvx_DJOQ.js";import{I as k}from"./input-DxWpxYcw.js";import{T as z}from"./textarea-CQyr-wjF.js";import{S as Ne,a as be,b as ve,c as Se,d as Te}from"./select-DLmo4Mz7.js";import{L as h}from"./label-BgGH2qdj.js";import{E as Ce}from"./jspdf.es.min-D4YI3ioX.js";import{P as Ae,a as Ee,b as Pe,C as ke}from"./popover-B30VlMr1.js";import{_ as A}from"./index-BVgtioTO.js";import{U as Fe}from"./UserInfoStep-C0kzeqK2.js";import{f as C}from"./format-BEMO4FpZ.js";import"./chevron-left-CbD5--fK.js";const Ie=()=>A.getAllCountries(),Le=c=>A.getStatesOfCountry(c),te=c=>{const d=A.getAllCountries().find(r=>r.id.toString()===c);return(d==null?void 0:d.name)||`Country ID: ${c}`},se=(c,d)=>{const r=A.getAllCountries().find(f=>f.id.toString()===c);if(!r)return`State ID: ${d}`;const p=A.getStatesOfCountry(r.id).find(f=>f.id.toString()===d);return(p==null?void 0:p.name)||`State ID: ${d}`},O={location_selection:{id:"location_selection",title:"Location Selection",description:"Select the country and state/province where this power of attorney will be executed",questions:["country","state"],nextSectionId:"executant_info"},executant_info:{id:"executant_info",title:"Executant Information",description:"Enter details of the person granting the special power of attorney",questions:["executant_info"],nextSectionId:"attorney_info"},attorney_info:{id:"attorney_info",title:"Special Attorney Information",description:"Enter details of the person being appointed as special attorney",questions:["attorney_info"],nextSectionId:"matter_details"},matter_details:{id:"matter_details",title:"Matter Details",description:"Specify the legal matter or case details",questions:["court_matter"],nextSectionId:"execution"},execution:{id:"execution",title:"Execution Details",description:"Specify the date of execution",questions:["execution_date"],nextSectionId:"witnesses"},witnesses:{id:"witnesses",title:"Witness Information",description:"Enter witness information for the power of attorney",questions:["witness1_info","witness2_info"],nextSectionId:"confirmation"},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm your information",questions:["confirmation"],nextSectionId:"user_info_step"},user_info_step:{id:"user_info_step",title:"User Information",description:"Enter your information to generate the document",questions:[]}},De={country:{id:"country",type:"select",text:"Select the country where this power of attorney will be executed:",options:Ie().map(c=>`${c.id}|${c.name}`),defaultNextId:"state"},state:{id:"state",type:"select",text:"Select the state/province where this power of attorney will be executed:",options:[],defaultNextId:"executant_info"},executant_info:{id:"executant_info",type:"person",text:"Executant Information:",defaultNextId:"attorney_info"},attorney_info:{id:"attorney_info",type:"person",text:"Special Attorney Information:",defaultNextId:"court_matter"},court_matter:{id:"court_matter",type:"textarea",text:"Legal Matter/Court Case Details:",defaultNextId:"execution_date"},execution_date:{id:"execution_date",type:"date",text:"Date of Execution:",defaultNextId:"witness1_info"},witness1_info:{id:"witness1_info",type:"witness",text:"Witness 1 Information:",defaultNextId:"witness2_info"},witness2_info:{id:"witness2_info",type:"witness",text:"Witness 2 Information:",defaultNextId:"confirmation"},confirmation:{id:"confirmation",type:"confirmation",text:"Thank you for providing the information. We will generate your Special Power of Attorney based on your answers."}},_t=()=>{const[c,d]=u.useState("location_selection"),[r,F]=u.useState({}),[p,f]=u.useState(["location_selection"]),[ne,H]=u.useState(!1),[oe,B]=u.useState(!1),[g,R]=u.useState({name:"",address:"",signature:""}),[y,G]=u.useState({name:"",address:"",signature:""}),[_,U]=u.useState({name:"",address:"",nicNo:""}),[m,J]=u.useState({name:"",address:"",nicNo:""}),[x,Q]=u.useState(),N=O[c],re=()=>{try{const n=N==null?void 0:N.nextSectionId;if(!n){H(!0);return}O[n]?(f([...p,n]),d(n)):(console.error(`Next section ${n} does not exist`),P.error("Navigation error. Please try again."))}catch(n){console.error("Error in handleNext:",n),P.error("An error occurred. Please try again.")}},ae=()=>{if(p.length>1){const n=[...p];n.pop(),f(n),d(n[n.length-1])}},E=(n,l)=>{F({...r,[n]:l})},V=(n,l,s)=>{n==="executant"?R({...g,[l]:s}):G({...y,[l]:s})},I=(n,l,s)=>{n==="witness1"?U({..._,[l]:s}):J({...m,[l]:s})},ie=n=>{const l=De[n];switch(l.type){case"text":return e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{htmlFor:n,className:"block text-sm font-medium text-black mb-1",children:l.text}),e.jsx(k,{id:n,value:r[n]||"",onChange:i=>E(n,i.target.value),placeholder:"Type your answer",className:"mt-1 text-black w-full bg-white"})]});case"textarea":return e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{htmlFor:n,className:"block text-sm font-medium text-black mb-1",children:l.text}),e.jsx(z,{id:n,value:r[n]||"",onChange:i=>E(n,i.target.value),placeholder:"Enter the legal matter, court case details, or specific purpose for this power of attorney",className:"mt-1 text-black w-full bg-white",rows:4})]});case"date":return e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{className:"block text-sm font-medium text-black mb-1",children:l.text}),e.jsxs(Ae,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:we("w-full justify-start text-left font-normal mt-1",!x&&"text-muted-foreground"),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),x?C(x,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(Pe,{className:"w-auto p-0 bg-white",children:e.jsx(ke,{mode:"single",selected:x,onSelect:Q,initialFocus:!0})})]})]});case"person":const s=n==="executant_info",b=s?g:y,T=s?"executant":"attorney";return e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{className:"block text-sm font-medium text-black mb-2",children:l.text}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-sm",children:"Full Name"}),e.jsx(k,{value:b.name,onChange:i=>V(T,"name",i.target.value),placeholder:"Enter full name",className:"text-black bg-white"})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm",children:"Address"}),e.jsx(z,{value:b.address,onChange:i=>V(T,"address",i.target.value),placeholder:"Enter complete address",className:"text-black bg-white",rows:3})]})]})]});case"witness":const w=n==="witness2_info",t=w?m:_,o=w?"witness2":"witness1";return e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{className:"block text-sm font-medium text-black mb-2",children:l.text}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx(h,{className:"text-sm",children:"Full Name"}),e.jsx(k,{value:t.name,onChange:i=>I(o,"name",i.target.value),placeholder:"Enter witness full name",className:"text-black bg-white"})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm",children:"Address"}),e.jsx(z,{value:t.address,onChange:i=>I(o,"address",i.target.value),placeholder:"Enter witness address",className:"text-black bg-white",rows:2})]}),e.jsxs("div",{children:[e.jsx(h,{className:"text-sm",children:"NIC Number"}),e.jsx(k,{value:t.nicNo,onChange:i=>I(o,"nicNo",i.target.value),placeholder:"Enter NIC number",className:"text-black bg-white"})]}),"            "]})]});case"select":let j=l.options||[];if(n==="state"&&r.country){const i=r.country.split("|")[0];j=Le(parseInt(i)).map(S=>`${S.id}|${S.name}`)}return e.jsxs("div",{className:"mb-2",children:[e.jsx(h,{htmlFor:n,className:"block text-sm font-medium text-black mb-1",children:l.text}),e.jsxs(Ne,{value:r[n]||"",onValueChange:i=>{E(n,i),n==="country"&&r.state&&E("state","")},children:[e.jsx(be,{className:"mt-1 text-black w-full bg-white",children:e.jsx(ve,{placeholder:"Select an option"})}),e.jsx(Se,{className:"bg-white",children:j.map(i=>{const[L,S]=i.includes("|")?i.split("|"):[i,i];return e.jsx(Te,{value:i,children:S},L)})})]})]});case"confirmation":return e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx(ye,{className:"h-12 w-12 text-green-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-black",children:l.text})]});default:return null}},ce=()=>c==="user_info_step"?e.jsx(Fe,{onBack:()=>d("review"),onGenerate:Y,isGenerating:oe,documentType:"Special Power of Attorney"}):N.questions.map(n=>ie(n)),le=()=>c==="confirmation"?!0:c==="user_info_step"?!1:c==="location_selection"?r.country&&r.state:c==="executant_info"?g.name&&g.address:c==="attorney_info"?y.name&&y.address:c==="matter_details"?r.court_matter:c==="execution"?x:c==="witnesses"?_.name&&_.address&&_.nicNo&&m.name&&m.address&&m.nicNo:!0,Y=async n=>{var l;B(!0);try{console.log("Generating Special Power of Attorney PDF...");const s=new Ce;s.setFont("helvetica","bold"),s.setFontSize(16),s.text("SPECIAL POWER OF ATTORNEY",105,20,{align:"center"});const b=r.country?te(r.country.split("|")[0]):"",T=r.state?se(((l=r.country)==null?void 0:l.split("|")[0])||"",r.state.split("|")[0]):"";let w="";b&&T?w=`(Under the laws of ${T}, ${b})`:b&&(w=`(Under the laws of ${b})`),w&&(s.setFont("helvetica","normal"),s.setFontSize(10),s.text(w,105,27,{align:"center"})),s.setFont("helvetica","normal"),s.setFontSize(11);let t=w?40:35;const o=6,j=280;s.setFont("helvetica","bold"),s.text("KNOW ALL MEN BY THESE PRESENTS",15,t),t+=o*1.5,s.setFont("helvetica","normal");const i=`THAT I, ${g.name||"_______________"} do hereby appoint, constitute and nominate ${y.name||"_______________"} as my Special Attorney to do the following acts, deeds, things and matters in: ${r.court_matter||"_______________"}`;s.splitTextToSize(i,170).forEach(a=>{s.text(a,15,t),t+=o}),t+=o,s.setFont("helvetica","bold"),s.text("Powers and Authorities:",15,t),t+=o*1.5,s.setFont("helvetica","normal");const S="1. To appear and act on my behalf in all Courts in the matter of "+(r.court_matter||"_______________")+".";s.splitTextToSize(S,165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,t>j-80&&(s.addPage(),t=20),s.splitTextToSize("2. To submit criminal complaints, application and other documentation before concerned forum (if required) and to get registered the cases and peruse the same as per requirement.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,s.splitTextToSize("3. To engage any advocate, file suits, reach compromise, respond and take necessary actions against any or all claims. To initiate, commence, carry on or defend all actions and other legal proceedings.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,t>j-60&&(s.addPage(),t=20),s.splitTextToSize("4. To sign and verify plaints, written statements, replies, petitions of claims and objections, memorandum of appeal and petitions and applications of all kinds and to file them in any court or office.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,s.splitTextToSize("5. To obtain court fee or stamp duty and to obtain refund of stamp duty or repayment of court fees. To apply to courts and offices for copies of documents and papers. To apply for the inspection of and to inspect records. To accept service of any summon, notice or writ issued by any court or officer against me.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,t>j-80&&(s.addPage(),t=20),s.splitTextToSize("6. Specially to do each and every thing requisite for all the purposes stated above and the purposes which are omitted and are to be done on my part.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,s.splitTextToSize("7. All the acts, deeds, matters and things done by the said Special Power of Attorney shall be construed as having been done by me and I do hereby agree to ratify and confirm the same.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*.5,s.splitTextToSize("8. That this Special Power of Attorney is made by me without any undue influence or coercion and in full knowledge of the facts and consequences of the same.",165).forEach(a=>{s.text(a,20,t),t+=o}),t+=o*1.5,t>j-120&&(s.addPage(),t=20);const _e=`WHEREOF I have put my hands to this Deed of Special Power of Attorney on ${x?C(x,"MMMM dd, yyyy"):"_______________"}.`;s.splitTextToSize(_e,170).forEach(a=>{s.text(a,15,t),t+=o}),t+=o*2,s.setFont("helvetica","bold"),s.text("Signatures:",15,t),t+=o*1.5,s.setFont("helvetica","normal"),s.text("Signature of Executant:",15,t),t+=o+5,s.text("____________________________",15,t),t+=o,s.text(`${g.name||"_______________"}`,15,t),t+=o*2,s.text("Specimen Signature of Attorney:",15,t),t+=o+5,s.text("____________________________",15,t),t+=o,s.text(`${y.name||"_______________"}`,15,t),t+=o*2,t>j-80&&(s.addPage(),t=20),s.setFont("helvetica","bold"),s.text("Witnesses:",15,t),t+=o*1.5,s.setFont("helvetica","normal"),s.text("Witness No. 1",15,t),s.text("Witness No. 2",105,t),t+=o+5,s.text("____________________________",15,t),s.text("____________________________",105,t),t+=o,s.text(`Name: ${_.name||"_______________"}`,15,t),s.text(`Name: ${m.name||"_______________"}`,105,t),t+=o;const me=_.address||"_______________",xe=m.address||"_______________";s.text("Address:",15,t),s.text("Address:",105,t),t+=o;const D=s.splitTextToSize(me,80),$=s.splitTextToSize(xe,80),he=Math.max(D.length,$.length);for(let a=0;a<he;a++)a<D.length&&s.text(D[a],15,t),a<$.length&&s.text($[a],105,t),t+=o;t+=o,s.text(`NIC No. ${_.nicNo||"_______________"}`,15,t),s.text(`NIC No. ${m.nicNo||"_______________"}`,105,t);const K=`special_power_of_attorney_${C(new Date,"yyyyMMdd_HHmmss")}.pdf`;return console.log("Saving PDF with filename:",K),s.save(K),P.success("Special Power of Attorney successfully generated!"),s}catch(s){return console.error("Error generating PDF:",s),P.error("Failed to generate Special Power of Attorney"),null}finally{B(!1)}},de=()=>{var n;return e.jsxs("div",{className:"space-y-2 text-black",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Special Power of Attorney Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"General Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",r.country?te(r.country.split("|")[0]):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"State/Province:"})," ",r.state?se(((n=r.country)==null?void 0:n.split("|")[0])||"",r.state.split("|")[0]):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Execution Date:"})," ",x?C(x,"dd/MM/yyyy"):"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Executant Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",g.name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",g.address||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Special Attorney Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",y.name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",y.address||"Not provided"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Legal Matter Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Court Matter:"})," ",r.court_matter||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Execution Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",x?C(x,"dd/MM/yyyy"):"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Witness 1"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",_.name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",_.address||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"NIC:"})," ",_.nicNo||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Witness 2"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",m.name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",m.address||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"NIC:"})," ",m.nicNo||"Not provided"]})]})]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/10",children:e.jsx("p",{className:"text-center mb-2",children:"By generating this document, you confirm the accuracy of the information provided. This document will serve as your official Special Power of Attorney."})})]})};return ne?e.jsx("div",{className:"bg-gray-50 min-h-0",children:e.jsxs(M,{className:"max-w-4xl mx-auto bg-white",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(X,{className:"text-xl text-green-600",children:"Special Power of Attorney"}),e.jsx(Z,{children:"Review your Special Power of Attorney details below before generating the final document."})]}),e.jsx(W,{className:"space-y-2",children:de()}),e.jsxs(ee,{className:"flex justify-between",children:[e.jsx(v,{variant:"outline",onClick:()=>{F({}),f(["location_selection"]),d("location_selection"),H(!1),R({name:"",address:"",signature:""}),G({name:"",address:"",signature:""}),U({name:"",address:"",nicNo:""}),J({name:"",address:"",nicNo:""}),Q(void 0)},children:"Start Over"}),e.jsx(v,{onClick:()=>Y(),children:"Generate Power of Attorney"})]})]})}):N?e.jsx("div",{className:"bg-gray-50 min-h-0",children:e.jsxs(M,{className:"max-w-4xl mx-auto bg-white",children:[e.jsxs(q,{children:[e.jsx(X,{className:"text-xl",children:N.title}),e.jsxs(Z,{children:[N.description,e.jsxs("div",{className:"mt-2 text-sm",children:["Step ",p.length," of ",Object.keys(O).length]})]}),c==="location_selection"&&e.jsx("div",{className:"mt-2",children:e.jsxs(v,{variant:"outline",onClick:()=>window.open("/special-power-of-attorney-info","_blank"),className:"text-bright-orange-600 border-bright-orange-600 hover:bg-bright-orange-50",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),"Learn More About Special Power of Attorney"]})})]}),e.jsx(W,{className:"text-black",children:e.jsx("div",{className:"grid grid-cols-1 gap-y-2",children:ce()})}),e.jsx(ee,{className:"flex justify-between",children:c!=="user_info_step"&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{variant:"outline",onClick:ae,disabled:p.length<=1,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx(v,{onClick:()=>re(),disabled:!le(),children:c==="confirmation"?e.jsxs(e.Fragment,{children:["Complete ",e.jsx(fe,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Next ",e.jsx(ge,{className:"w-4 h-4 ml-2"})]})})]})})]})}):e.jsx("div",{className:"bg-gray-50 min-h-0",children:e.jsx(M,{className:"max-w-4xl mx-auto bg-white",children:e.jsxs(W,{className:"text-center p-4",children:[e.jsx("p",{className:"text-red-500",children:"An error occurred. Please refresh the page."}),e.jsx(v,{onClick:()=>{d("location_selection"),f(["location_selection"])},className:"mt-2",children:"Start Over"})]})})})};export{_t as default};
