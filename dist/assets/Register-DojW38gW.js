import{u as F,r as n,j as e,a4 as N,g as w,a as A,s as v,J as i,L as q}from"./index-Bvx_DJOQ.js";import{I as m}from"./input-DxWpxYcw.js";import{L as l}from"./label-BgGH2qdj.js";import{C as L}from"./checkbox-D5qdt3sL.js";import{E as b}from"./eye-off-CJsxzjJc.js";const T=()=>{const d=F(),[s,P]=n.useState({fullName:"",email:"",phone:"",password:"",confirmPassword:""}),[g,C]=n.useState(!1),[u,k]=n.useState(!1),[h,S]=n.useState(!1),[y,t]=n.useState(!1),[j,o]=n.useState("");n.useEffect(()=>{(async()=>{const{data:r}=await v.auth.getSession();r.session&&d("/dashboard")})()},[d]);const c=a=>{const{name:r,value:p}=a.target;P(x=>({...x,[r]:p}))},E=a=>/^\+?[0-9]{10,15}$/.test(a),D=async a=>{if(a.preventDefault(),t(!0),o(""),!s.fullName||!s.email||!s.password||!s.phone){o("Please fill in all required fields"),i.error("Please fill in all required fields"),t(!1);return}if(s.password!==s.confirmPassword){o("Passwords do not match"),i.error("Passwords do not match"),t(!1);return}if(!g){o("Please agree to the Terms and Conditions"),i.error("Please agree to the Terms and Conditions"),t(!1);return}if(!E(s.phone)){o("Please enter a valid phone number"),i.error("Please enter a valid phone number"),t(!1);return}try{const[r,...p]=s.fullName.split(" "),x=p.join(" "),{error:f}=await v.auth.signUp({email:s.email,password:s.password,options:{data:{first_name:r,last_name:x,phone:s.phone,full_name:s.fullName}}});if(f){console.error("Sign up error:",f.message),o("Error creating account: "+f.message),i.error("Account creation failed"),t(!1);return}localStorage.setItem("lastLoginEmail",s.email),i.success("Account created successfully! Please log in."),d("/login")}catch(r){console.error("Exception during signup:",r),i.error("An unexpected error occurred"),o("An unexpected error occurred"),t(!1)}};return e.jsxs("form",{onSubmit:D,className:"space-y-5",children:[j&&e.jsx("div",{className:"p-3 bg-red-50/30 border border-red-200/30 text-red-400 text-sm rounded-md animate-slide-in",children:j}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.1s"},children:[e.jsx(l,{htmlFor:"fullName",children:"Full Name"}),e.jsx(m,{id:"fullName",name:"fullName",value:s.fullName,onChange:c,placeholder:"Enter your full name",className:"mt-1 futuristic-input",required:!0})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.2s"},children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",name:"email",type:"email",value:s.email,onChange:c,placeholder:"Enter your email",className:"mt-1 futuristic-input",required:!0})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.25s"},children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number"}),e.jsx(m,{id:"phone",name:"phone",type:"tel",value:s.phone,onChange:c,placeholder:"Enter your phone number",className:"mt-1 futuristic-input",required:!0}),e.jsx("p",{className:"text-xs text-rocket-gray-500 mt-1",children:"Format: +1234567890 or 1234567890"})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.3s"},children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"password",name:"password",type:u?"text":"password",value:s.password,onChange:c,placeholder:"Create a password",className:"mt-1 pr-10 futuristic-input",required:!0,minLength:8}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-rocket-gray-500 hover:text-rocket-blue-500 transition-colors",onClick:()=>k(!u),children:u?e.jsx(b,{size:16}):e.jsx(N,{size:16})})]}),e.jsx("p",{className:"text-xs text-rocket-gray-500 mt-1",children:"Password must be at least 8 characters"})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.4s"},children:[e.jsx(l,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",value:s.confirmPassword,onChange:c,placeholder:"Confirm your password",className:"mt-1 pr-10 futuristic-input",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-rocket-gray-500 hover:text-rocket-blue-500 transition-colors",onClick:()=>S(!h),children:h?e.jsx(b,{size:16}):e.jsx(N,{size:16})})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 pt-2 animate-slide-in",style:{animationDelay:"0.5s"},children:[e.jsx(L,{id:"terms",checked:g,onCheckedChange:a=>C(!!a),className:"mt-1"}),e.jsxs(l,{htmlFor:"terms",className:"text-sm cursor-pointer",children:["I agree to the"," ",e.jsx(w,{to:"/terms",className:"text-rocket-blue-500 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx(w,{to:"/privacy",className:"text-rocket-blue-500 hover:underline",children:"Privacy Policy"})]})]}),e.jsx(A,{type:"submit",className:"w-full bg-rocket-blue hover:bg-rocket-blue-600 mt-3 transition-all duration-300 animate-slide-in",style:{animationDelay:"0.6s"},disabled:y,children:y?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})},B=()=>e.jsx(q,{children:e.jsx("div",{className:"min-h-screen bg-background flex flex-col items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(T,{})})});export{B as default};
