import{u as oe,r as g,j as t,C as v,k as A,l as D,m as C,b as N,n as F,a as x,F as le,A as de,S as _e,d as ce,J as w,e as me,i as xe,ak as he}from"./index-BZJi8bXH.js";import{I as E}from"./input-CIIwscNp.js";import{S as R,a as k,b as $,c as M,d as O}from"./select-zbs1mPtn.js";import{L as u}from"./label-DWmcNUUx.js";import{E as pe}from"./jspdf.es.min-Djrbirno.js";import{P as fe,a as ge,b as ue,C as ye}from"./popover-ReYWxfXu.js";import{_ as y}from"./index-DRHPEVXe.js";import{f as o}from"./format-BEMO4FpZ.js";import"./chevron-left-VHQRYIzX.js";const H=()=>y.getAllCountries(),je=l=>y.getStatesOfCountry(l),z=l=>{const s=y.getAllCountries().find(d=>d.id.toString()===l);return(s==null?void 0:s.name)||`Country ID: ${l}`},I=(l,s)=>{const d=y.getAllCountries().find(_=>_.id.toString()===l);if(!d)return`State ID: ${s}`;const h=y.getStatesOfCountry(d.id).find(_=>_.id.toString()===s);return(h==null?void 0:h.name)||`State ID: ${s}`},b={location_selection:{id:"location_selection",title:"Location Selection",description:"Select the country and state where this lease renewal agreement will be executed",questions:["country","state"],nextSectionId:"agreement_details"},agreement_details:{id:"agreement_details",title:"Agreement Details",description:"Enter the basic information about the lease renewal agreement",questions:["effective_date","original_lease_date","expiration_date"],nextSectionId:"landlord_info"},landlord_info:{id:"landlord_info",title:"Landlord Information",description:"Enter the landlord details",questions:["landlord_name","landlord_address"],nextSectionId:"tenant_info"},tenant_info:{id:"tenant_info",title:"Tenant Information",description:"Enter the tenant details",questions:["tenant_name"],nextSectionId:"property_info"},property_info:{id:"property_info",title:"Property Information",description:"Enter details about the leased property",questions:["property_address","property_city","property_zip"],nextSectionId:"renewal_terms"},renewal_terms:{id:"renewal_terms",title:"Renewal Terms",description:"Specify the renewal terms and conditions",questions:["renewal_months","start_date","end_date","monthly_rent","due_day"],nextSectionId:"confirmation"},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm your information",questions:["confirmation"]}},we={country:{id:"country",type:"select",text:"Select your country:",options:H().map(l=>`${l.id}|${l.name}`),defaultNextId:"state"},state:{id:"state",type:"select",text:"Select your state/province:",options:[],defaultNextId:"effective_date"},effective_date:{id:"effective_date",type:"date",text:"Effective Date of Renewal Agreement:",defaultNextId:"original_lease_date"},original_lease_date:{id:"original_lease_date",type:"date",text:"Original Lease Date:",defaultNextId:"expiration_date"},expiration_date:{id:"expiration_date",type:"date",text:"Original Lease Expiration Date:",defaultNextId:"landlord_name"},landlord_name:{id:"landlord_name",type:"text",text:"Landlord's Full Name:",defaultNextId:"landlord_address"},landlord_address:{id:"landlord_address",type:"text",text:"Landlord's Address:",defaultNextId:"tenant_name"},tenant_name:{id:"tenant_name",type:"text",text:"Tenant's Full Name:",defaultNextId:"property_address"},property_address:{id:"property_address",type:"text",text:"Property Street Address:",defaultNextId:"property_city"},property_city:{id:"property_city",type:"text",text:"Property City:",defaultNextId:"property_zip"},property_zip:{id:"property_zip",type:"text",text:"Property ZIP Code:",defaultNextId:"renewal_months"},renewal_months:{id:"renewal_months",type:"number",text:"Renewal Term (number of months):",defaultNextId:"start_date"},start_date:{id:"start_date",type:"date",text:"Renewal Start Date:",defaultNextId:"end_date"},end_date:{id:"end_date",type:"date",text:"Renewal End Date:",defaultNextId:"monthly_rent"},monthly_rent:{id:"monthly_rent",type:"number",text:"Monthly Rent Amount ($):",defaultNextId:"due_day"},due_day:{id:"due_day",type:"number",text:"Day of month rent is due (1-31):",defaultNextId:"confirmation"},confirmation:{id:"confirmation",type:"confirmation",text:"Thank you for providing the information. We will generate your Lease Renewal Agreement based on your answers."}},Ge=()=>{const l=oe(),[s,d]=g.useState("location_selection"),[a,h]=g.useState({}),[_,j]=g.useState(["location_selection"]),[B,S]=g.useState(!1),[L,W]=g.useState({}),m=b[s],G=()=>{try{const e=m==null?void 0:m.nextSectionId;if(!e){S(!0);return}b[e]?(j([..._,e]),d(e)):(console.error(`Next section ${e} does not exist`),w.error("Navigation error. Please try again."))}catch(e){console.error("Error in handleNext:",e),w.error("An error occurred. Please try again.")}},V=()=>{if(_.length>1){const e=[..._];e.pop(),j(e),d(e[e.length-1])}},p=(e,n)=>{h({...a,[e]:n})},T=(e,n)=>{W({...L,[e]:n})},J=e=>{const n=we[e];switch(n.type){case"text":return t.jsxs("div",{className:"mb-2",children:[t.jsx(u,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsx(E,{id:e,value:a[e]||"",onChange:r=>p(e,r.target.value),placeholder:"Type your answer",className:"mt-1 text-black w-full bg-white"})]});case"number":return t.jsxs("div",{className:"mb-2",children:[t.jsx(u,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsx(E,{id:e,type:"number",value:a[e]||"",onChange:r=>p(e,r.target.value),placeholder:"Enter number",className:"mt-1 text-black w-full bg-white"})]});case"date":return t.jsxs("div",{className:"mb-2",children:[t.jsx(u,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsxs(fe,{open:L[e]||!1,onOpenChange:r=>T(e,r),children:[t.jsx(ge,{asChild:!0,children:t.jsxs(x,{variant:"outline",className:xe("w-full justify-start text-left font-normal mt-1 text-black bg-white",!a[e]&&"text-muted-foreground"),children:[t.jsx(he,{className:"mr-2 h-4 w-4"}),a[e]?o(new Date(a[e]),"PPP"):t.jsx("span",{children:"Pick a date"})]})}),t.jsx(ue,{className:"w-auto p-0 bg-white",align:"start",children:t.jsx(ye,{mode:"single",selected:a[e]?new Date(a[e]):void 0,onSelect:r=>{r&&(p(e,r.toISOString()),T(e,!1))},initialFocus:!0})})]})]});case"select":if(e==="country")return t.jsxs("div",{className:"mb-2",children:[t.jsx(u,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsxs(R,{value:a[e]||"",onValueChange:r=>{p(e,r),a.state&&p("state","")},children:[t.jsx(k,{className:"mt-1 text-black w-full bg-white",children:t.jsx($,{placeholder:"Select a country"})}),t.jsx(M,{className:"bg-white",children:H().map(r=>t.jsx(O,{value:`${r.id}`,children:r.name},r.id))})]})]});if(e==="state"){const r=a.country,c=r?je(parseInt(r)):[];return t.jsxs("div",{className:"mb-2",children:[t.jsx(u,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsxs(R,{value:a[e]||"",onValueChange:f=>p(e,f),disabled:!r,children:[t.jsx(k,{className:"mt-1 text-black w-full bg-white",children:t.jsx($,{placeholder:r?"Select a state/province":"Select a country first"})}),t.jsx(M,{className:"bg-white",children:c.map(f=>t.jsx(O,{value:`${f.id}`,children:f.name},f.id))})]})]})}break;case"confirmation":return t.jsxs("div",{className:"mt-2 text-center",children:[t.jsx(me,{className:"h-12 w-12 text-green-500 mx-auto"}),t.jsx("p",{className:"mt-2 text-black",children:n.text})]});default:return null}},Q=()=>m.questions.map(e=>J(e)),Z=()=>s==="confirmation"?!0:s==="location_selection"?a.country&&a.state:s==="agreement_details"?a.effective_date&&a.original_lease_date&&a.expiration_date:s==="landlord_info"?a.landlord_name&&a.landlord_address:s==="tenant_info"?a.tenant_name:s==="property_info"?a.property_address&&a.property_city&&a.property_zip:s==="renewal_terms"?a.renewal_months&&a.start_date&&a.end_date&&a.monthly_rent&&a.due_day:!0,K=()=>{try{console.log("Generating Lease Renewal Agreement PDF...");const e=new pe;e.setFont("helvetica","bold"),e.setFontSize(16),e.text("LEASE RENEWAL AGREEMENT",105,20,{align:"center"}),e.setFont("helvetica","normal"),e.setFontSize(11);let n=35;const r=6,c=280,X=`This Lease Renewal Agreement ("Renewal Agreement") is made and entered into as of ${a.effective_date?o(new Date(a.effective_date),"MMMM d, yyyy"):"________________"} (the "Effective Date") by and between`;e.splitTextToSize(X,170).forEach(i=>{e.text(i,15,n),n+=r}),n+=r,e.text(`${a.landlord_name||"________________________"}, residing at ${a.landlord_address||"________________________"} ("Landlord"),`,15,n),n+=r+3,e.setFont("helvetica","bold"),e.text("And",15,n),n+=r+3,e.setFont("helvetica","normal"),e.text(`${a.tenant_name||"________________________"} ("Tenant").`,15,n),n+=r+10,e.setFont("helvetica","bold"),e.text("1. Leased Property",15,n),n+=r+3,e.setFont("helvetica","normal");const Ne=z(a.country||""),Y=I(a.country||"",a.state||""),q=`The Landlord hereby leases to the Tenant the residential property located at ${a.property_address||"________________________"}, ${a.property_city||"__________"}, ${Y}, ${a.property_zip||"__________"} (the "Premises").`;e.splitTextToSize(q,170).forEach(i=>{e.text(i,15,n),n+=r}),n+=r+5,e.setFont("helvetica","bold"),e.text("2. Original Lease",15,n),n+=r+3,e.setFont("helvetica","normal");const ee=a.original_lease_date?o(new Date(a.original_lease_date),"MMMM d, yyyy"):"________________",te=a.expiration_date?o(new Date(a.expiration_date),"MMMM d, yyyy"):"________________",ne=`The parties previously entered into a lease agreement dated ${ee} for the Premises (the "Original Lease"), which is set to expire on ${te}. A copy of the Original Lease is attached hereto as Exhibit A and incorporated by reference.`;e.splitTextToSize(ne,170).forEach(i=>{n>c-20&&(e.addPage(),n=20),e.text(i,15,n),n+=r}),n+=r+5,e.setFont("helvetica","bold"),e.text("3. Renewal and Modification",15,n),n+=r+3,e.setFont("helvetica","normal"),e.text("The parties now wish to extend the term of the Original Lease and agree to amend it as follows:",15,n),n+=r+5,e.setFont("helvetica","bold"),e.text("a. Renewal Term",20,n),n+=r+3,e.setFont("helvetica","normal");const ae=a.start_date?o(new Date(a.start_date),"MMMM d, yyyy"):"________________",re=a.end_date?o(new Date(a.end_date),"MMMM d, yyyy"):"________________",se=`The lease is hereby extended for an additional period of ${a.renewal_months||"____"} months (the "Renewal Term"), beginning on ${ae} and ending on ${re}.`;e.splitTextToSize(se,165).forEach(i=>{n>c-20&&(e.addPage(),n=20),e.text(i,20,n),n+=r}),n+=r+5,e.setFont("helvetica","bold"),e.text("b. Rent",20,n),n+=r+3,e.setFont("helvetica","normal");const ie=`The monthly rent during the Renewal Term shall be $${a.monthly_rent||"________"}, payable in advance on or before the ${a.due_day||"__"} day of each calendar month.`;e.splitTextToSize(ie,165).forEach(i=>{n>c-20&&(e.addPage(),n=20),e.text(i,20,n),n+=r}),n+=r+10,e.setFont("helvetica","bold"),e.text("4. Continued Effect of Original Lease",15,n),n+=r+3,e.setFont("helvetica","normal"),e.splitTextToSize("Except as expressly modified by this Renewal Agreement, all other terms, covenants, and conditions of the Original Lease shall remain unchanged and in full force and effect during the Renewal Term.",170).forEach(i=>{n>c-20&&(e.addPage(),n=20),e.text(i,15,n),n+=r}),n+=r+10,e.setFont("helvetica","bold"),e.text("5. Entire Agreement",15,n),n+=r+3,e.setFont("helvetica","normal"),e.splitTextToSize("This Renewal Agreement, together with the Original Lease, constitutes the entire understanding between the parties with respect to the Premises and supersedes all prior agreements or understandings, whether oral or written, relating to the subject matter hereof.",170).forEach(i=>{n>c-20&&(e.addPage(),n=20),e.text(i,15,n),n+=r}),n+=r+10,e.setFont("helvetica","bold"),e.text("6. Execution",15,n),n+=r+3,e.setFont("helvetica","normal"),e.splitTextToSize("This Renewal Agreement may be executed in counterparts and shall be effective as of the Effective Date upon execution by both parties.",170).forEach(i=>{n>c-20&&(e.addPage(),n=20),e.text(i,15,n),n+=r}),n+=r+15,n>c-100&&(e.addPage(),n=20),e.setFont("helvetica","bold"),e.text("IN WITNESS WHEREOF, the parties have executed this Lease Renewal Agreement as of the date set forth below.",15,n),n+=r+15,e.setFont("helvetica","bold"),e.text("LANDLORD:",15,n),n+=r+10,e.setFont("helvetica","normal"),e.text("Signature: ___________________________",15,n),n+=r+5,e.text(`Name: ${a.landlord_name||"______________________________"}`,15,n),n+=r+5,e.text("Date: _______________________________",15,n),n+=r+15,e.setFont("helvetica","bold"),e.text("TENANT:",15,n),n+=r+10,e.setFont("helvetica","normal"),e.text("Signature: ___________________________",15,n),n+=r+5,e.text(`Name: ${a.tenant_name||"______________________________"}`,15,n),n+=r+5,e.text("Date: _______________________________",15,n);const P=`lease_renewal_agreement_${o(new Date,"yyyyMMdd_HHmmss")}.pdf`;return console.log("Saving PDF with filename:",P),e.save(P),w.success("Lease Renewal Agreement successfully generated!"),e}catch(e){return console.error("Error generating PDF:",e),w.error("Failed to generate Lease Renewal Agreement"),null}},U=()=>t.jsxs("div",{className:"space-y-2 text-black",children:[t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Lease Renewal Agreement Summary"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Location"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Country:"})," ",a.country?z(a.country):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"State/Province:"})," ",a.state?I(a.country||"",a.state):"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Agreement Details"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Effective Date:"})," ",a.effective_date?o(new Date(a.effective_date),"PPP"):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Original Lease Date:"})," ",a.original_lease_date?o(new Date(a.original_lease_date),"PPP"):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Expiration Date:"})," ",a.expiration_date?o(new Date(a.expiration_date),"PPP"):"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Landlord Information"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," ",a.landlord_name||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Address:"})," ",a.landlord_address||"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Tenant Information"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," ",a.tenant_name||"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Property Information"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Address:"})," ",a.property_address||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"City:"})," ",a.property_city||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"ZIP:"})," ",a.property_zip||"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Renewal Terms"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Renewal Period:"})," ",a.renewal_months||"Not provided"," months"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Start Date:"})," ",a.start_date?o(new Date(a.start_date),"PPP"):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"End Date:"})," ",a.end_date?o(new Date(a.end_date),"PPP"):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Monthly Rent:"})," $",a.monthly_rent||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Due Day:"})," ",a.due_day||"Not provided"]})]})]})]}),t.jsx("div",{className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/10",children:t.jsx("p",{className:"text-center mb-2",children:"By generating this document, you confirm the accuracy of the information provided. This document will serve as your official Lease Renewal Agreement."})})]});return B?t.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:t.jsxs(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:[t.jsxs(A,{className:"text-center",children:[t.jsx(D,{className:"text-xl text-green-600",children:"Lease Renewal Agreement"}),t.jsx(C,{children:"Review your Lease Renewal Agreement details below before generating the final document."})]}),t.jsx(N,{className:"space-y-2",children:U()}),t.jsxs(F,{className:"flex justify-between",children:[t.jsx(x,{variant:"outline",onClick:()=>{h({}),j(["location_selection"]),d("location_selection"),S(!1)},className:"mt-2",children:"Start Over"}),t.jsx(x,{onClick:K,children:"Generate Lease Renewal Agreement"})]})]})}):m?t.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:t.jsxs(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:[t.jsxs(A,{children:[t.jsx(D,{className:"text-xl",children:m.title}),t.jsxs(C,{children:[m.description,s==="location_selection"&&t.jsx("div",{className:"mt-3 flex left-0",children:t.jsxs(x,{variant:"outline",size:"sm",onClick:()=>l("/lease-renewal-info"),className:"text-orange-600 border-orange-600 hover:bg-orange-50",children:[t.jsx(le,{className:"w-4 h-4 mr-2"}),"Learn More About Lease Renewal Agreement"]})}),t.jsxs("div",{className:"mt-2 text-sm",children:["Step ",_.length," of ",Object.keys(b).length]})]})]}),t.jsx(N,{className:"text-black",children:t.jsx("div",{className:"grid grid-cols-1 gap-y-2",children:Q()})}),t.jsxs(F,{className:"flex justify-between",children:[t.jsxs(x,{variant:"outline",onClick:V,disabled:_.length<=1,children:[t.jsx(de,{className:"w-4 h-4 mr-2"})," Back"]}),t.jsx(x,{onClick:()=>G(),disabled:!Z(),children:s==="confirmation"?t.jsxs(t.Fragment,{children:["Complete ",t.jsx(_e,{className:"w-4 h-4 ml-2"})]}):t.jsxs(t.Fragment,{children:["Next ",t.jsx(ce,{className:"w-4 h-4 ml-2"})]})})]})]})}):t.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:t.jsx(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:t.jsxs(N,{className:"text-center p-4",children:[t.jsx("p",{className:"text-red-500",children:"An error occurred. Please refresh the page."}),t.jsx(x,{onClick:()=>{d("location_selection"),j(["location_selection"])},className:"mt-2",children:"Start Over"})]})})})};export{Ge as default};
