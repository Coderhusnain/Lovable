import{u as q,r as p,j as t,C as v,k,l as $,m as E,b as j,n as z,a as m,F as ee,A as te,S as ne,d as re,J as w,i as ae,ak as ie,e as se}from"./index-Bvx_DJOQ.js";import{I as oe}from"./input-DxWpxYcw.js";import{S as I,a as O,b as M,c as H,d as R}from"./select-DLmo4Mz7.js";import{L as N}from"./label-BgGH2qdj.js";import{E as le}from"./jspdf.es.min-D4YI3ioX.js";import{P as de,a as ce,b as _e,C as me}from"./popover-B30VlMr1.js";import{_ as u}from"./index-BVgtioTO.js";import{U as xe}from"./UserInfoStep-C0kzeqK2.js";import{f}from"./format-BEMO4FpZ.js";import"./chevron-left-CbD5--fK.js";const B=()=>u.getAllCountries(),he=s=>u.getStatesOfCountry(s),pe=s=>{const i=u.getAllCountries().find(l=>l.id.toString()===s);return(i==null?void 0:i.name)||`Country ID: ${s}`},fe=(s,i)=>{const l=u.getAllCountries().find(d=>d.id.toString()===s);if(!l)return`State ID: ${i}`;const x=u.getStatesOfCountry(l.id).find(d=>d.id.toString()===i);return(x==null?void 0:x.name)||`State ID: ${i}`},b={location_selection:{id:"location_selection",title:"Location Selection",description:"Select the country and state where this lease termination agreement will be executed",questions:["country","state"],nextSectionId:"parties_info"},parties_info:{id:"parties_info",title:"Parties Information",description:"Enter the landlord and tenant details",questions:["landlord_name","landlord_city_state","tenant_name"],nextSectionId:"original_lease_info"},original_lease_info:{id:"original_lease_info",title:"Original Lease Information",description:"Enter details about the original lease agreement",questions:["original_lease_date","property_street","property_city","property_state","property_zip"],nextSectionId:"termination_details"},termination_details:{id:"termination_details",title:"Termination Details",description:"Specify the termination date and forwarding address",questions:["termination_date","forwarding_name","forwarding_street","forwarding_city","forwarding_state","forwarding_zip"],nextSectionId:"user_info"},user_info:{id:"user_info",title:"Contact Information",description:"Provide your contact information to generate the document",questions:["user_info_step"]},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm your information",questions:["confirmation"]}},ge={country:{id:"country",type:"select",text:"Select your country:",options:B().map(s=>`${s.id}|${s.name}`),defaultNextId:"state"},state:{id:"state",type:"select",text:"Select your state/province:",options:[],defaultNextId:"landlord_name"},landlord_name:{id:"landlord_name",type:"text",text:"Landlord's Full Name:",defaultNextId:"landlord_city_state"},landlord_city_state:{id:"landlord_city_state",type:"text",text:"Landlord's City, State:",defaultNextId:"tenant_name"},tenant_name:{id:"tenant_name",type:"text",text:"Tenant's Full Name:",defaultNextId:"original_lease_date"},original_lease_date:{id:"original_lease_date",type:"date",text:"Date of Original Lease:",defaultNextId:"property_street"},property_street:{id:"property_street",type:"text",text:"Property Street Address:",defaultNextId:"property_city"},property_city:{id:"property_city",type:"text",text:"Property City:",defaultNextId:"property_state"},property_state:{id:"property_state",type:"text",text:"Property State:",defaultNextId:"property_zip"},property_zip:{id:"property_zip",type:"text",text:"Property ZIP Code:",defaultNextId:"termination_date"},termination_date:{id:"termination_date",type:"date",text:"Date of Termination:",defaultNextId:"forwarding_name"},forwarding_name:{id:"forwarding_name",type:"text",text:"Tenant Name (for forwarding address):",defaultNextId:"forwarding_street"},forwarding_street:{id:"forwarding_street",type:"text",text:"Forwarding Street Address:",defaultNextId:"forwarding_city"},forwarding_city:{id:"forwarding_city",type:"text",text:"Forwarding City:",defaultNextId:"forwarding_state"},forwarding_state:{id:"forwarding_state",type:"text",text:"Forwarding State:",defaultNextId:"forwarding_zip"},forwarding_zip:{id:"forwarding_zip",type:"text",text:"Forwarding ZIP Code:",defaultNextId:"confirmation"},user_info_step:{id:"user_info_step",type:"confirmation",text:"Please provide your contact information to generate your document."},confirmation:{id:"confirmation",type:"confirmation",text:"Thank you for providing the information. We will generate your Agreement to Terminate Lease based on your answers."}},Oe=()=>{const s=q(),[i,l]=p.useState("location_selection"),[r,x]=p.useState({}),[d,y]=p.useState(["location_selection"]),[G,S]=p.useState(!1),[T,W]=p.useState({}),[Z,F]=p.useState(!1),c=b[i],V=()=>{try{const e=c==null?void 0:c.nextSectionId;if(!e){S(!0);return}b[e]?(y([...d,e]),l(e)):(console.error(`Next section ${e} does not exist`),w.error("Navigation error. Please try again."))}catch(e){console.error("Error in handleNext:",e),w.error("An error occurred. Please try again.")}},C=()=>{if(d.length>1){const e=[...d];e.pop(),y(e),l(e[e.length-1])}},g=(e,n)=>{x({...r,[e]:n})},L=(e,n)=>{W({...T,[e]:n})},A=e=>{const n=ge[e];switch(n.type){case"text":return t.jsxs("div",{className:"mb-2",children:[t.jsx(N,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsx(oe,{id:e,value:r[e]||"",onChange:a=>g(e,a.target.value),placeholder:"Type your answer",className:"mt-1 text-black w-full bg-white"})]});case"date":return t.jsxs("div",{className:"mb-2",children:[t.jsx(N,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsxs(de,{open:T[e]||!1,onOpenChange:a=>L(e,a),children:[t.jsx(ce,{asChild:!0,children:t.jsxs(m,{variant:"outline",className:ae("w-full justify-start text-left font-normal mt-1 text-black bg-white",!r[e]&&"text-muted-foreground"),children:[t.jsx(ie,{className:"mr-2 h-4 w-4"}),r[e]?f(new Date(r[e]),"PPP"):t.jsx("span",{children:"Pick a date"})]})}),t.jsx(_e,{className:"w-auto p-0 bg-white",align:"start",children:t.jsx(me,{mode:"single",selected:r[e]?new Date(r[e]):void 0,onSelect:a=>{a&&(g(e,a.toISOString()),L(e,!1))},initialFocus:!0})})]})]});case"select":if(e==="country")return t.jsxs("div",{className:"mb-2",children:[t.jsx(N,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsxs(I,{value:r[e]||"",onValueChange:a=>{g(e,a),r.state&&g("state","")},children:[t.jsx(O,{className:"mt-1 text-black w-full bg-white",children:t.jsx(M,{placeholder:"Select a country"})}),t.jsx(H,{className:"bg-white",children:B().map(a=>t.jsx(R,{value:`${a.id}`,children:a.name},a.id))})]})]});if(e==="state"){const a=r.country,h=a?he(parseInt(a)):[];return t.jsxs("div",{className:"mb-2",children:[t.jsx(N,{htmlFor:e,className:"block text-sm font-medium text-black mb-1",children:n.text}),t.jsxs(I,{value:r[e]||"",onValueChange:_=>g(e,_),disabled:!a,children:[t.jsx(O,{className:"mt-1 text-black w-full bg-white",children:t.jsx(M,{placeholder:a?"Select a state/province":"Select a country first"})}),t.jsx(H,{className:"bg-white",children:h.map(_=>t.jsx(R,{value:`${_.id}`,children:_.name},_.id))})]})]})}break;case"confirmation":return e==="user_info_step"?t.jsx(xe,{onBack:C,onGenerate:P,documentType:"Lease Termination Agreement",isGenerating:Z}):t.jsxs("div",{className:"mt-2 text-center",children:[t.jsx(se,{className:"h-12 w-12 text-green-500 mx-auto"}),t.jsx("p",{className:"mt-2 text-black",children:n.text})]});default:return null}},J=()=>c.questions.map(e=>A(e)),Q=()=>i==="confirmation"?!0:i==="location_selection"?r.country&&r.state:i==="parties_info"?r.landlord_name&&r.landlord_city_state&&r.tenant_name:i==="original_lease_info"?r.original_lease_date&&r.property_street&&r.property_city&&r.property_state&&r.property_zip:i==="termination_details"?r.termination_date&&r.forwarding_name&&r.forwarding_street&&r.forwarding_city&&r.forwarding_state&&r.forwarding_zip:!0,P=()=>{try{F(!0),console.log("Generating Agreement to Terminate Lease PDF...");const e=new le;e.setFont("helvetica","bold"),e.setFontSize(16),e.text("AGREEMENT TO TERMINATE LEASE",105,20,{align:"center"}),e.setFont("helvetica","normal"),e.setFontSize(11);let n=35;const a=6,h=280,_=`This Agreement to Terminate Lease ("Agreement") is entered into by and between ${r.landlord_name||"[Landlord's Full Name]"} ("Landlord")`;e.splitTextToSize(_,170).forEach(o=>{e.text(o,15,n),n+=a}),n+=a,e.setFont("helvetica","bold"),e.text("And",15,n),n+=a+3,e.setFont("helvetica","normal");const K=r.original_lease_date?f(new Date(r.original_lease_date),"MMMM d, yyyy"):"[Date of Original Lease]";e.text(`${r.tenant_name||"[Tenant's Full Name]"} ("Tenant"), who previously executed a Lease Agreement dated ${K}, pertaining to the real property located at ${r.property_street||"[Street Address]"}, ${r.property_city||"[City]"}, ${r.property_state||"[State]"}, ${r.property_zip||"[Zip Code]"} (the "Premises").`,15,n),n+=a*3+5,e.setFont("helvetica","bold"),e.text("WHEREAS,",15,n),e.setFont("helvetica","normal"),e.text(" the parties now mutually desire to terminate the aforementioned Lease Agreement;",50,n),n+=a+5,e.setFont("helvetica","bold"),e.text("NOW, THEREFORE,",15,n),e.setFont("helvetica","normal"),e.splitTextToSize(" in consideration of the mutual promises and covenants contained herein, and other good and valuable consideration, the receipt and sufficiency of which are hereby acknowledged, the parties agree as follows:",120).forEach((o,Y)=>{Y===0?e.text(o,80,n):e.text(o,15,n),n+=a}),n+=a+5,e.setFont("helvetica","bold"),e.text("1. Termination Date",15,n),n+=a+3,e.setFont("helvetica","normal");const X=`The Lease Agreement shall be terminated effective as of ${r.termination_date?f(new Date(r.termination_date),"MMMM d, yyyy"):"[Date of Termination]"} (the "Termination Date"). As of the Termination Date, all rights, obligations, and responsibilities of the parties under the Lease Agreement shall cease and be of no further force or effect, except as otherwise provided herein.`;e.splitTextToSize(X,170).forEach(o=>{n>h-20&&(e.addPage(),n=20),e.text(o,15,n),n+=a}),n+=a+5,e.setFont("helvetica","bold"),e.text("2. Survival of Provisions",15,n),n+=a+3,e.setFont("helvetica","normal"),e.splitTextToSize("Notwithstanding the termination of the Lease, any provisions of the original Lease Agreement that by their nature are intended to survive termination, including but not limited to indemnification, liability for damages, and remedies for default, shall remain in full force and effect, subject to the revised Termination Date.",170).forEach(o=>{n>h-20&&(e.addPage(),n=20),e.text(o,15,n),n+=a}),n+=a+5,e.setFont("helvetica","bold"),e.text("3. Forwarding Address",15,n),n+=a+3,e.setFont("helvetica","normal"),e.text("Tenant designates the following address as their forwarding address for purposes of receiving any correspondence, including the return of any security deposit or other legal notices required by law:",15,n),n+=a*2+5,e.text(`${r.forwarding_name||"[Tenant Name]"}`,15,n),n+=a+3,e.text(`${r.forwarding_street||"[Street Address]"}`,15,n),n+=a+3,e.text(`${r.forwarding_city||"[City]"}, ${r.forwarding_state||"[State]"} ${r.forwarding_zip||"[Zip Code]"}`,15,n),n+=a+10,e.setFont("helvetica","bold"),e.text("4. Execution",15,n),n+=a+3,e.setFont("helvetica","normal"),e.splitTextToSize("This Agreement shall be deemed effective upon execution by both parties. This Agreement may be executed in counterparts, and electronic signatures shall have the same force and effect as original signatures.",170).forEach(o=>{n>h-20&&(e.addPage(),n=20),e.text(o,15,n),n+=a}),n+=a+15,n>h-100&&(e.addPage(),n=20),e.setFont("helvetica","bold"),e.text("IN WITNESS WHEREOF, the parties have executed this Agreement as of the dates written below.",15,n),n+=a+15,e.setFont("helvetica","bold"),e.text("LANDLORD:",15,n),n+=a+10,e.setFont("helvetica","normal"),e.text("Signature: ___________________________",15,n),n+=a+5,e.text(`Name: ${r.landlord_name||"______________________________"}`,15,n),n+=a+5,e.text(`Location: ${r.landlord_city_state||"______________________________"}`,15,n),n+=a+5,e.text("Date: _______________________________",15,n),n+=a+15,e.setFont("helvetica","bold"),e.text("TENANT:",15,n),n+=a+10,e.setFont("helvetica","normal"),e.text("Signature: ___________________________",15,n),n+=a+5,e.text(`Name: ${r.tenant_name||"______________________________"}`,15,n),n+=a+5,e.text("Date: _______________________________",15,n);const D=`agreement_to_terminate_lease_${f(new Date,"yyyyMMdd_HHmmss")}.pdf`;return console.log("Saving PDF with filename:",D),e.save(D),w.success("Agreement to Terminate Lease successfully generated!"),e}catch(e){return console.error("Error generating PDF:",e),w.error("Failed to generate Agreement to Terminate Lease"),null}finally{F(!1)}},U=()=>t.jsxs("div",{className:"space-y-2 text-black",children:[t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Agreement to Terminate Lease Summary"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Location"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Country:"})," ",r.country?pe(r.country):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"State/Province:"})," ",r.state?fe(r.country||"",r.state):"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Parties"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Landlord:"})," ",r.landlord_name||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Landlord Location:"})," ",r.landlord_city_state||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Tenant:"})," ",r.tenant_name||"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Original Lease"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Original Lease Date:"})," ",r.original_lease_date?f(new Date(r.original_lease_date),"PPP"):"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Property Address:"})," ",r.property_street||"Not provided"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"City, State, ZIP:"})," ",`${r.property_city||""}, ${r.property_state||""} ${r.property_zip||""}`.trim()||"Not provided"]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-sm",children:"Termination Details"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Termination Date:"})," ",r.termination_date?f(new Date(r.termination_date),"PPP"):"Not provided"]}),t.jsx("p",{children:t.jsx("strong",{children:"Forwarding Address:"})}),t.jsx("p",{className:"ml-2",children:r.forwarding_name||"Not provided"}),t.jsx("p",{className:"ml-2",children:r.forwarding_street||"Not provided"}),t.jsx("p",{className:"ml-2",children:`${r.forwarding_city||""}, ${r.forwarding_state||""} ${r.forwarding_zip||""}`.trim()||"Not provided"})]})]})]}),t.jsx("div",{className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/10",children:t.jsx("p",{className:"text-center mb-2",children:"By generating this document, you confirm the accuracy of the information provided. This document will serve as your official Agreement to Terminate Lease."})})]});return G?t.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:t.jsxs(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:[t.jsxs(k,{className:"text-center",children:[t.jsx($,{className:"text-xl text-green-600",children:"Agreement to Terminate Lease"}),t.jsx(E,{children:"Review your Agreement to Terminate Lease details below before generating the final document."})]}),t.jsx(j,{className:"space-y-2",children:U()}),t.jsxs(z,{className:"flex justify-between",children:[t.jsx(m,{variant:"outline",onClick:()=>{x({}),y(["location_selection"]),l("location_selection"),S(!1)},className:"mt-2",children:"Start Over"}),t.jsx(m,{onClick:P,children:"Generate Agreement to Terminate Lease"})]})]})}):c?t.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:t.jsxs(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:[t.jsxs(k,{children:[t.jsx($,{className:"text-xl",children:c.title}),t.jsxs(E,{children:[c.description,i==="location_selection"&&t.jsx("div",{className:"mt-3 flex left-0",children:t.jsxs(m,{variant:"outline",size:"sm",onClick:()=>s("/lease-termination-info"),className:"text-orange-600 border-orange-600 hover:bg-orange-50",children:[t.jsx(ee,{className:"w-4 h-4 mr-2"}),"Learn More About Agreement to Terminate Lease"]})}),t.jsxs("div",{className:"mt-2 text-sm",children:["Step ",d.length," of ",Object.keys(b).length]})]})]}),t.jsx(j,{className:"text-black",children:t.jsx("div",{className:"grid grid-cols-1 gap-y-2",children:i==="user_info"?A("user_info_step"):J()})}),i!=="user_info"&&t.jsxs(z,{className:"flex justify-between",children:[t.jsxs(m,{variant:"outline",onClick:C,disabled:d.length<=1,children:[t.jsx(te,{className:"w-4 h-4 mr-2"})," Back"]}),t.jsx(m,{onClick:()=>V(),disabled:!Q(),children:i==="confirmation"?t.jsxs(t.Fragment,{children:["Complete ",t.jsx(ne,{className:"w-4 h-4 ml-2"})]}):t.jsxs(t.Fragment,{children:["Next ",t.jsx(re,{className:"w-4 h-4 ml-2"})]})})]})]})}):t.jsx("div",{className:"bg-gray-50 py-2 min-h-0",children:t.jsx(v,{className:"max-w-4xl mx-auto bg-white px-4 my-2 rounded-lg shadow-sm",children:t.jsxs(j,{className:"text-center p-4",children:[t.jsx("p",{className:"text-red-500",children:"An error occurred. Please refresh the page."}),t.jsx(m,{onClick:()=>{l("location_selection"),y(["location_selection"])},className:"mt-2",children:"Start Over"})]})})})};export{Oe as default};
