import{u as ae,r as b,j as e,C as $,k as L,e as H,l as G,m as Y,b as D,a as h,F as U,n as se,A as ne,S as ie,d as re,J as A,i as oe,ak as de}from"./index-EUBTzQul.js";import{I as z}from"./input-BXL43AC-.js";import{T as ce}from"./textarea-Dfjbmtdk.js";import{S as le,a as _e,b as fe,c as me,d as ue}from"./select-fj3w0PNH.js";import{L as x}from"./label-9rsijxaJ.js";import{E as he}from"./jspdf.es.min-CJIQpcZG.js";import{P as xe,a as pe,b as ye,C as ge}from"./popover-BqgC3DaQ.js";import{_ as w}from"./index-Cyh42AxN.js";import{U as ve}from"./UserInfoStep-nEfX4EqD.js";import{f as F}from"./format-BEMO4FpZ.js";import"./chevron-left-CJdn5DtI.js";const be=()=>w.getAllCountries(),Ne=d=>w.getStatesOfCountry(d),we=d=>{const c=w.getAllCountries().find(t=>t.id.toString()===d);return(c==null?void 0:c.name)||`Country ID: ${d}`},je=(d,c)=>{const t=w.getAllCountries().find(f=>f.id.toString()===d);if(!t)return`State ID: ${c}`;const l=w.getStatesOfCountry(t.id).find(f=>f.id.toString()===c);return(l==null?void 0:l.name)||`State ID: ${c}`},N={location_selection:{id:"location_selection",title:"Jurisdiction Information",description:"Select the country and state where this affidavit will be executed",questions:["country","state"],nextSectionId:"person_status"},person_status:{id:"person_status",title:"Person Status",description:"Specify whether the person this affidavit concerns is alive or deceased",questions:["person_status"],nextSectionId:"affiant_info"},affiant_info:{id:"affiant_info",title:"Affiant Information",description:"Enter your information as the person making this affidavit",questions:["affiant_name","affiant_address","county"],nextSectionId:"residence_details"},residence_details:{id:"residence_details",title:"Residence Details",description:"Provide residence information",questions:[],nextSectionId:"confirmation"},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm your information",questions:["confirmation"],nextSectionId:"user_info"},user_info:{id:"user_info",title:"Contact Information",description:"Enter your contact information to generate the document",questions:[]}},Ce={country:{id:"country",type:"select",text:"Select the country where this affidavit will be executed:",options:[],defaultNextId:"state"},state:{id:"state",type:"select",text:"Select the state/province where this affidavit will be executed:",options:[],defaultNextId:"person_status"},person_status:{id:"person_status",type:"radio",text:"Is the person this affidavit concerns alive or deceased?",options:["alive","deceased"],defaultNextId:"affiant_info"},county:{id:"county",type:"text",text:"Enter the county:",defaultNextId:"affiant_name"},affiant_name:{id:"affiant_name",type:"text",text:"Your Full Name (Affiant):",defaultNextId:"affiant_address"},affiant_address:{id:"affiant_address",type:"textarea",text:"Your Current Address:",defaultNextId:"residence_details"},residence_years:{id:"residence_years",type:"number",text:"How many years have you resided at the current address?",defaultNextId:"household_members"},household_members:{id:"household_members",type:"textarea",text:"List the names of individuals who reside with you at the above address:",defaultNextId:"affidavit_date"},deceased_name:{id:"deceased_name",type:"text",text:"Full Name of the Deceased Person:",defaultNextId:"death_date"},death_date:{id:"death_date",type:"date",text:"Date of Death:",defaultNextId:"deceased_address"},deceased_address:{id:"deceased_address",type:"textarea",text:"Legal Residence Address of the Deceased at Time of Death:",defaultNextId:"residence_duration"},residence_duration:{id:"residence_duration",type:"text",text:"How long was the deceased a resident of this state prior to death?",defaultNextId:"affidavit_date"},affidavit_date:{id:"affidavit_date",type:"date",text:"Date of Affidavit:",defaultNextId:"confirmation"},confirmation:{id:"confirmation",type:"confirmation",text:"Thank you for providing the information. We will generate your Affidavit of Residence based on your answers."}},Ge=()=>{ae();const[d,c]=b.useState("location_selection"),[t,T]=b.useState({}),[l,f]=b.useState(["location_selection"]),[B,I]=b.useState(!1),[k,P]=b.useState(!1),_=N[d],E=()=>{t.person_status==="alive"?N.residence_details.questions=["residence_years","household_members","affidavit_date"]:t.person_status==="deceased"&&(N.residence_details.questions=["deceased_name","death_date","deceased_address","residence_duration","affidavit_date"])},J=()=>{try{if(d==="confirmation"){const n=_==null?void 0:_.nextSectionId;n&&(f([...l,n]),c(n));return}const s=_==null?void 0:_.nextSectionId;if(!s){I(!0);return}s==="residence_details"&&E(),N[s]?(f([...l,s]),c(s)):(console.error(`Next section ${s} does not exist`),A.error("Navigation error. Please try again."))}catch(s){console.error("Error in handleNext:",s),A.error("An error occurred. Please try again.")}},R=()=>{if(l.length>1){const s=[...l];s.pop(),f(s),c(s[s.length-1])}},m=(s,n)=>{T({...t,[s]:n})},Q=s=>{var a;const n=Ce[s];switch(n.type){case"text":return e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:s,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsx(z,{id:s,value:t[s]||"",onChange:i=>m(s,i.target.value),placeholder:"Type your answer",className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm"})]});case"number":return e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:s,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsx(z,{id:s,type:"number",min:"0",value:t[s]||"",onChange:i=>m(s,i.target.value),placeholder:"Enter number",className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm"})]});case"textarea":return e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:s,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsx(ce,{id:s,value:t[s]||"",onChange:i=>m(s,i.target.value),placeholder:"Enter details",className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm",rows:3})]});case"date":return e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:s,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsxs(xe,{children:[e.jsx(pe,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:oe("w-full justify-start text-left font-normal",!t[s]&&"text-muted-foreground"),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),t[s]?t[s]:e.jsx("span",{children:"Select a date"})]})}),e.jsx(ye,{className:"w-auto p-0 bg-white rounded-lg shadow-sm",children:e.jsx(ge,{mode:"single",selected:t[s]?new Date(t[s]):void 0,onSelect:i=>m(s,i?F(i,"yyyy-MM-dd"):""),initialFocus:!0,className:"p-3 pointer-events-auto bg-white rounded-lg shadow-sm"})})]})]});case"radio":return e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{className:"block text-sm font-medium text-black mb-2",children:n.text}),e.jsx("div",{className:"space-y-2",children:(a=n.options)==null?void 0:a.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:`${s}_${i}`,name:s,value:i,checked:t[s]===i,onChange:o=>m(s,o.target.value),className:"text-primary"}),e.jsx(x,{htmlFor:`${s}_${i}`,className:"text-black capitalize",children:i})]},i))})]});case"select":let r=n.options||[];if(s==="country")r=be().map(o=>`${o.id}|${o.name}`);else if(s==="state"&&t.country){const i=t.country.split("|")[0];r=Ne(parseInt(i)).map(p=>`${p.id}|${p.name}`)}return e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:s,className:"block text-sm font-medium text-black mb-1",children:n.text}),e.jsxs(le,{value:t[s]||"",onValueChange:i=>{m(s,i),s==="country"&&t.state&&m("state","")},disabled:s==="state"&&!t.country,children:[e.jsx(_e,{className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm",children:e.jsx(fe,{placeholder:s==="state"&&!t.country?"Please select a country first":"Select an option"})}),e.jsx(me,{className:"bg-white rounded-lg shadow-sm",children:r.map(i=>{const[o,p]=i.includes("|")?i.split("|"):[i,i];return e.jsx(ue,{value:i,children:p},o)})})]})]});case"confirmation":return e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx(H,{className:"h-12 w-12 text-green-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-black",children:n.text})]});default:return null}},V=()=>(d==="residence_details"&&E(),_.questions.map(s=>Q(s))),W=()=>{if(d==="confirmation")return!0;if(d==="location_selection")return t.country&&t.state;if(d==="person_status")return t.person_status;if(d==="affiant_info")return t.affiant_name&&t.affiant_address&&t.county;if(d==="residence_details"){if(t.person_status==="alive")return t.residence_years&&t.household_members&&t.affidavit_date;if(t.person_status==="deceased")return t.deceased_name&&t.death_date&&t.deceased_address&&t.residence_duration&&t.affidavit_date}return!0},M=async()=>{var s;P(!0);try{console.log("Generating Affidavit of Residence PDF...");const n=new he;n.setFont("helvetica","bold"),n.setFontSize(16),n.text("AFFIDAVIT OF RESIDENCE",105,20,{align:"center"});let a=40;const r=6,i=280;n.setFont("helvetica","normal"),n.setFontSize(11);const o=(y,u,S,g=180)=>{const ee=n.splitTextToSize(y,g);let v=S;return ee.forEach(te=>{v>i-30&&(n.addPage(),v=20),n.text(te,u,v),v+=r}),v},p=t.country?we(t.country.split("|")[0]):"[COUNTRY]",j=t.state?je(((s=t.country)==null?void 0:s.split("|")[0])||"",t.state.split("|")[0]):"[STATE]",C=t.county||"[COUNTY]";if(t.person_status==="alive"){const y=`I, ${t.affiant_name||"_______"}, being of lawful age and a resident at ${t.affiant_address||"_________________"} in ${C}, do on oath and under penalties of perjury, depose and say:`;a=o(y,15,a),a+=r*1.5;const u=`I have resided in ${C}, state ${j} for ${t.residence_years||"_____"} years.`;a=o(u,15,a),a+=r*1.5,a=o("I made this affidavit for no improper use.",15,a),a+=r*1.5;const g=`The following individuals reside with me at the above address: ${t.household_members||"_________________"}`;a=o(g,15,a),a+=r*1.5}else{const y=`I, ${t.affiant_name||"_______"}, being of lawful age and a resident at ${t.affiant_address||"_________________"} in ${C}, do on oath and under penalties of perjury, depose and say:`;a=o(y,15,a),a+=r*1.5;const u=t.deceased_name||"_______________________",S=t.death_date?F(new Date(t.death_date),"MMMM dd, yyyy"):"_________________",g=`That I am a disinterested party in the estate of ${u} who died on ${S}. At the time of death ${u}'s legal residence was at ${t.deceased_address||"_______________"}, ${C} County and ${u} was a resident of state of ${j} for ${t.residence_duration||"___________________"} prior to death, and was not the resident of any other state at the time of death.`;a=o(g,15,a),a+=r*1.5}const K=`I certify under penalty of perjury under ${j} law that I know the contents of this Affidavit signed by me and that the statements are true and correct.`;a=o(K,15,a),a+=r*2,n.text("_________________________________",15,a),a+=r,n.text(`${t.affiant_name||"[AFFIANT NAME]"}`,15,a),a+=r,n.text("Affiant",15,a),a+=r*2;const X=t.affidavit_date?F(new Date(t.affidavit_date),"MMMM dd, yyyy"):"_____________________";n.text(`Date: ${X}`,15,a),a+=r*2,n.text(`STATE OF ${j.toUpperCase()}, COUNTRY OF ${p.toUpperCase()}`,15,a),a+=r*2,n.text("_________________________________",15,a),a+=r,n.text("Notary Public",15,a),a+=r*3,n.addPage(),a=20,n.setFont("helvetica","bold"),n.setFontSize(14),n.text("Make It Legal",15,a),a+=r*2,n.setFont("helvetica","normal"),n.setFontSize(11);const Z=`This Affidavit should be signed in front of a notary public by ${t.affiant_name||"[AFFIANT NAME]"}.`;a=o(Z,15,a),a+=r,a=o("Once signed in front of a notary, this document should be delivered to the appropriate court for filing.",15,a),a+=r*1.5,n.setFont("helvetica","bold"),n.text("Copies",15,a),a+=r,n.setFont("helvetica","normal"),a=o("The original Affidavit should be filed with the Clerk of Court or delivered to the requesting business. The Affiant should maintain a copy of the Affidavit. Your copy should be kept in a safe place. If you signed a paper copy of your document, you can use Legal Gram to store and share it. Safe and secure in your Legal Gram File Manager, you can access it any time from any computer, as well as share it for future reference.",15,a),a+=r*1.5,n.setFont("helvetica","bold"),n.text("Additional Assistance",15,a),a+=r,n.setFont("helvetica","normal"),a=o("If you are unsure or have questions regarding this Affidavit or need additional assistance with special situations or circumstances, use Legal Gram's Find A Lawyer search engine to find a lawyer in your area to assist you in this matter.",15,a);const q=F(new Date,"yyyyMMdd_HHmmss"),O=`affidavit_of_residence_${t.person_status==="alive"?"living":"deceased"}_${q}.pdf`;return console.log("Saving PDF with filename:",O),n.save(O),A.success("Affidavit of Residence successfully generated!"),n}catch(n){return console.error("Error generating PDF:",n),A.error("Failed to generate Affidavit of Residence"),null}finally{P(!1)}};return d==="user_info"?e.jsx(ve,{onBack:R,onGenerate:M,documentType:"Affidavit of Residence",isGenerating:k}):B?e.jsxs($,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(L,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"w-6 h-6 text-green-600"})}),e.jsx(G,{className:"text-green-800",children:"Affidavit of Residence Complete!"}),e.jsx(Y,{children:"Your document has been generated successfully."})]}),e.jsxs(D,{className:"text-center space-y-4",children:[e.jsxs(h,{onClick:M,className:"bg-green-600 hover:bg-green-700 text-white",disabled:k,children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),k?"Generating...":"Download PDF"]}),e.jsx("div",{children:e.jsx(h,{variant:"outline",onClick:()=>{c("location_selection"),f(["location_selection"]),T({}),I(!1)},children:"Start Over"})})]})]}):_?e.jsx("div",{className:"bg-gray-50 min-h-0 bg-white rounded-lg shadow-sm",children:e.jsxs($,{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-sm",children:[e.jsxs(L,{children:[e.jsx(G,{className:"text-xl",children:_.title}),e.jsxs(Y,{children:[_.description,e.jsxs("div",{className:"mt-2 text-sm",children:["Step ",l.length," of ",Object.keys(N).length]})]}),d==="location_selection"&&e.jsx("div",{className:"mt-4",children:e.jsxs(h,{variant:"outline",onClick:()=>window.open("/affidavit-of-residence-info","_blank"),className:"text-bright-orange-600 border-bright-orange-600 hover:bg-bright-orange-50",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Learn More About Affidavit of Residence"]})})]}),e.jsx(D,{className:"text-black",children:e.jsx("div",{className:"grid grid-cols-1 gap-y-2",children:V()})}),e.jsxs(se,{className:"flex justify-between",children:[e.jsxs(h,{variant:"outline",onClick:R,disabled:l.length<=1,children:[e.jsx(ne,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx(h,{onClick:()=>J(),disabled:!W(),children:d==="confirmation"?e.jsxs(e.Fragment,{children:["Complete ",e.jsx(ie,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Next ",e.jsx(re,{className:"w-4 h-4 ml-2"})]})})]})]})}):e.jsx($,{className:"w-full max-w-4xl mx-auto",children:e.jsxs(D,{className:"text-center p-4",children:[e.jsx("p",{className:"text-red-500",children:"An error occurred. Please refresh the page."}),e.jsx(h,{onClick:()=>{c("location_selection"),f(["location_selection"])},className:"mt-4",children:"Start Over"})]})})};export{Ge as default};
