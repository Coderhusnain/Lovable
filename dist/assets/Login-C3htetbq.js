import{u as C,a3 as P,r,j as e,L as z,a2 as D,x as M,a4 as A,g as j,a as R,s as N,J as m}from"./index-Bvx_DJOQ.js";import{I as k}from"./input-DxWpxYcw.js";import{C as W}from"./checkbox-D5qdt3sL.js";import{A as B,a as F}from"./alert-DKH39t-f.js";import{I as U}from"./info-Ds1p5Kp9.js";import{E as q}from"./eye-off-CJsxzjJc.js";const Y=()=>{const i=C(),d=P(),[o,h]=r.useState(""),[x,y]=r.useState(""),[u,g]=r.useState(!1),[l,S]=r.useState(!1),[b,n]=r.useState(!1),[w,c]=r.useState(""),p=new URLSearchParams(d.search),E=p.get("redirect"),f=p.get("step"),v=()=>E==="ask-legal-advice"&&f?`/ask-legal-advice?step=${f}`:"/user-dashboard";r.useEffect(()=>{(async()=>{try{console.log("Checking existing session...");const{data:s,error:I}=await N.auth.getSession();console.log("Session check result:",{data:s,error:I}),s.session&&i(v())}catch(s){console.error("Session check error:",s)}})();const t=localStorage.getItem("lastLoginEmail");t&&(h(t),g(!0))},[i]);const L=async a=>{a.preventDefault(),n(!0),c(""),console.log("Attempting login with:",{email:o,supabaseUrl:"https://abxrphctohxctpmaozvc.supabase.co",timestamp:new Date().toISOString()}),u?localStorage.setItem("lastLoginEmail",o):localStorage.removeItem("lastLoginEmail");try{console.log("Calling supabase.auth.signInWithPassword...");const{data:t,error:s}=await N.auth.signInWithPassword({email:o,password:x});if(console.log("Login response:",{data:t,error:s}),s){console.error("Login error details:",{message:s.message,status:s.status||"No status",name:s.name||"Unknown error type"}),c(s.message),m.error("Login failed"),n(!1);return}console.log("Login successful, redirecting..."),m.success("Welcome back!"),i(v())}catch(t){console.error("Login exception:",t),console.error("Error details:",{name:t.name,message:t.message,stack:t.stack}),c("Network error - please check your connection and try again."),m.error("Network error occurred"),n(!1)}};return e.jsx(z,{children:e.jsxs("div",{className:"w-screen h-screen flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"/lovable-uploads/067c7b04-b1a2-4236-97eb-2b7cf8b24291.png",alt:"Background",className:"w-full h-full object-cover filter brightness-50"}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"})]}),e.jsxs("div",{className:"w-full max-w-md px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-8 animate-fade-in",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-white",children:"Welcome Back"}),e.jsx("p",{className:"text-white/90 font-medium",children:"Sign in to access your legal documents and advice history."})]}),e.jsxs("div",{className:"glass-card rounded-xl shadow-xl border border-white/10 p-8 animate-scale-in backdrop-blur-lg bg-white/10",children:[e.jsxs(B,{className:"mb-6 bg-black/20 border-amber-300/30 animate-slide-in",style:{animationDelay:"0.025s"},children:[e.jsx(U,{className:"h-4 w-4 !text-white"}),e.jsx(F,{className:"text-xs text-white font-medium",children:"Sign in to access your account. Your information is securely stored in Supabase."})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[w&&e.jsx("div",{className:"p-3 bg-red-500/20 border border-red-400 text-white text-sm rounded-md animate-shake",children:w}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-white mb-1",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{id:"email",type:"email",value:o,onChange:a=>h(a.target.value),placeholder:"Enter your email",className:"pl-10 bg-white/10 border-black/20 text-white placeholder:text-white/60 placeholder:font-medium focus:border-black/40 focus:ring-black/20 hover:bg-white/20 transition-all duration-300",required:!0}),e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-white mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{id:"password",type:l?"text":"password",value:x,onChange:a=>y(a.target.value),placeholder:"Enter your password",className:"pl-10 bg-white/10 border-black/20 text-white placeholder:text-white/60 placeholder:font-medium focus:border-black/40 focus:ring-black/20 hover:bg-white/20 transition-all duration-300",required:!0}),e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-white"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white hover:text-white/70 transition-colors",onClick:()=>S(!l),children:l?e.jsx(q,{size:16}):e.jsx(A,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{id:"remember-me",checked:u,onCheckedChange:a=>g(!!a),className:"border-white/50 data-[state=checked]:bg-white"}),e.jsx("label",{htmlFor:"remember-me",className:"text-sm cursor-pointer text-white hover:text-white/70 transition-colors",children:"Remember me"})]}),e.jsx(j,{to:"/forgot-password",className:"text-white text-sm hover:text-white/70 transition-colors",children:"Forgot password?"})]}),e.jsx(R,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white transition-all duration-300 hover:shadow-lg hover:shadow-orange-300/50 animate-fade-in",style:{animationDelay:"0.5s"},disabled:b,children:b?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"}),e.jsx("div",{className:"relative my-6",children:e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-white/10"})})})]}),e.jsx("div",{className:"mt-8 text-center animate-fade-in",style:{animationDelay:"0.7s"},children:e.jsxs("p",{className:"text-white",children:["Don't have an account? "," ",e.jsx(j,{to:`/signup${d.search}`,className:"text-white hover:text-white/70 transition-colors hover:underline",children:"Sign up"})]})})]})]})]})})};export{Y as default};
