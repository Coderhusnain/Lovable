import{r as _,j as e,C as b,k as F,l as T,m as D,b as w,n as M,a as h,F as te,A as ae,S as ne,d as re,J as y,e as se,i as ie,ak as oe}from"./index-EUBTzQul.js";import{I}from"./input-BXL43AC-.js";import{T as ce}from"./textarea-Dfjbmtdk.js";import{S as le,a as de,b as me,c as fe,d as he}from"./select-fj3w0PNH.js";import{L as p}from"./label-9rsijxaJ.js";import{E as ue}from"./jspdf.es.min-CJIQpcZG.js";import{P as xe,a as _e,b as pe,C as ge}from"./popover-BqgC3DaQ.js";import{_ as g}from"./index-Cyh42AxN.js";import{U as P}from"./UserInfoStep-nEfX4EqD.js";import{f as E}from"./format-BEMO4FpZ.js";import"./chevron-left-CJdn5DtI.js";const ye=()=>g.getAllCountries(),Ne=s=>g.getStatesOfCountry(s),$=s=>{const o=g.getAllCountries().find(t=>t.id.toString()===s);return(o==null?void 0:o.name)||`Country ID: ${s}`},H=(s,o)=>{const t=g.getAllCountries().find(l=>l.id.toString()===s);if(!t)return`State ID: ${o}`;const c=g.getStatesOfCountry(t.id).find(l=>l.id.toString()===o);return(c==null?void 0:c.name)||`State ID: ${o}`},k={location_selection:{id:"location_selection",title:"Jurisdiction Information",description:"Select the country, state, and county where this affidavit will be executed",questions:["country","state","county"],nextSectionId:"applicant_info"},applicant_info:{id:"applicant_info",title:"Applicant Information",description:"Enter information about the person whose name change is being verified",questions:["current_name","name_assumed_date","former_name","birth_date","current_address"],nextSectionId:"relationship_info"},relationship_info:{id:"relationship_info",title:"Affiant Relationship Information",description:"Enter your relationship to the applicant and knowledge details",questions:["years_known","known_by_current","known_by_former","relationship_to_applicant","reason_for_variance"],nextSectionId:"affiant_info"},affiant_info:{id:"affiant_info",title:"Affiant Information",description:"Enter your information as the person making this affidavit",questions:["affiant_name","affidavit_date"],nextSectionId:"user_info"},user_info:{id:"user_info",title:"Contact Information",description:"Provide your contact information",questions:[],nextSectionId:"confirmation"},confirmation:{id:"confirmation",title:"Confirmation",description:"Review and confirm your information",questions:["confirmation"]}},je={country:{id:"country",type:"select",text:"Select the country where this affidavit will be executed:",options:[],defaultNextId:"state"},state:{id:"state",type:"select",text:"Select the state/province where this affidavit will be executed:",options:[],defaultNextId:"county"},county:{id:"county",type:"text",text:"Enter the county where this affidavit will be executed:",defaultNextId:"current_name"},current_name:{id:"current_name",type:"text",text:"Current Name of Applicant:",defaultNextId:"name_assumed_date"},name_assumed_date:{id:"name_assumed_date",type:"date",text:"Approximate Date Current Name Was Assumed:",defaultNextId:"former_name"},former_name:{id:"former_name",type:"text",text:"Former Name of Applicant:",defaultNextId:"birth_date"},birth_date:{id:"birth_date",type:"date",text:"Applicant's Date of Birth:",defaultNextId:"current_address"},current_address:{id:"current_address",type:"textarea",text:"Current residential address of the Applicant:",defaultNextId:"years_known"},years_known:{id:"years_known",type:"number",text:"Number of Years You Have Known the Applicant:",defaultNextId:"known_by_current"},known_by_current:{id:"known_by_current",type:"textarea",text:"How the Applicant has been known by their Current Name (provide details):",defaultNextId:"known_by_former"},known_by_former:{id:"known_by_former",type:"textarea",text:"How the Applicant has been known by their Former Name (provide details):",defaultNextId:"relationship_to_applicant"},relationship_to_applicant:{id:"relationship_to_applicant",type:"text",text:"Your Relationship to the Applicant:",defaultNextId:"reason_for_variance"},reason_for_variance:{id:"reason_for_variance",type:"textarea",text:"The variance in the Applicant's name as it appears on their birth records and the name currently in use is due to:",defaultNextId:"affiant_name"},affiant_name:{id:"affiant_name",type:"text",text:"Affiant's Full Name (your name):",defaultNextId:"affidavit_date"},affidavit_date:{id:"affidavit_date",type:"date",text:"Date of Affidavit:",defaultNextId:"confirmation"},confirmation:{id:"confirmation",type:"confirmation",text:"Thank you for providing the information. We will generate your Affidavit of Marriage based on your answers."}},Ee=()=>{const[s,o]=_.useState("location_selection"),[t,N]=_.useState({}),[c,l]=_.useState(["location_selection"]),[R,C]=_.useState(!1),[A,S]=_.useState(!1),d=k[s],B=()=>{try{const a=d==null?void 0:d.nextSectionId;if(!a){C(!0);return}k[a]?(l([...c,a]),o(a)):(console.error(`Next section ${a} does not exist`),y.error("Navigation error. Please try again."))}catch(a){console.error("Error in handleNext:",a),y.error("An error occurred. Please try again.")}},j=()=>{if(c.length>1){const a=[...c];a.pop(),l(a),o(a[a.length-1])}},v=async()=>{var a;S(!0);try{console.log("Generating Affidavit of Marriage PDF...");const r=new ue;r.setFont("helvetica","bold"),r.setFontSize(16),r.text("AFFIDAVIT OF MARRIAGE",105,20,{align:"center"});let i=35;const n=6,m=280;r.setFont("helvetica","normal"),r.setFontSize(11);const f=(K,Q,X,Z=180)=>{const q=r.splitTextToSize(K,Z);let x=X;return q.forEach(ee=>{x>m-30&&(r.addPage(),x=20),r.text(ee,Q,x),x+=n}),x},ve=t.country?$(t.country.split("|")[0]):"[COUNTRY]",L=t.state?H(((a=t.country)==null?void 0:a.split("|")[0])||"",t.state.split("|")[0]):"[STATE]",U=t.county||"[COUNTY]";r.text(`State of ${L}`,15,i),i+=n,r.text(`County of ${U}`,15,i),i+=n*2;const V=`I, ${t.affiant_name||"_____________________________________"}, of legal age, do hereby make this affidavit and state as follows:`;i=f(V,15,i),i+=n;const W=`1. The current name of the applicant is ${t.current_name||"_____________________________________"}.`;i=f(W,15,i),i+=n;const z=`affidavit_of_marriage_${E(new Date,"yyyyMMdd_HHmmss")}.pdf`;r.save(z),y.success("Affidavit of Marriage successfully generated!")}catch(r){console.error("Error generating PDF:",r),y.error("Failed to generate Affidavit of Marriage")}finally{S(!1)}},u=(a,r)=>{N({...t,[a]:r})},O=a=>{const r=je[a];switch(r.type){case"text":return e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{htmlFor:a,className:"block text-sm font-medium text-black mb-1",children:r.text}),e.jsx(I,{id:a,value:t[a]||"",onChange:n=>u(a,n.target.value),placeholder:"Type your answer",className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm"})]});case"number":return e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{htmlFor:a,className:"block text-sm font-medium text-black mb-1",children:r.text}),e.jsx(I,{id:a,type:"number",min:"0",value:t[a]||"",onChange:n=>u(a,n.target.value),placeholder:"Enter number of years",className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm"})]});case"textarea":return e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{htmlFor:a,className:"block text-sm font-medium text-black mb-1",children:r.text}),e.jsx(ce,{id:a,value:t[a]||"",onChange:n=>u(a,n.target.value),placeholder:"Enter details",className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm",rows:3})]});case"date":return e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{htmlFor:a,className:"block text-sm font-medium text-black mb-1",children:r.text}),e.jsxs(xe,{children:[e.jsx(_e,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:ie("w-full justify-start text-left font-normal bg-white rounded-lg shadow-sm",!t[a]&&"text-muted-foreground"),children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),t[a]?t[a]:e.jsx("span",{children:"Select a date"})]})}),e.jsx(pe,{className:"w-auto p-0 bg-white rounded-lg shadow-sm",children:e.jsx(ge,{mode:"single",selected:t[a]?new Date(t[a]):void 0,onSelect:n=>u(a,n?E(n,"yyyy-MM-dd"):""),initialFocus:!0,className:"p-3 pointer-events-auto bg-white rounded-lg shadow-sm"})})]})]});case"select":let i=r.options||[];if(a==="country")i=ye().map(m=>`${m.id}|${m.name}`);else if(a==="state"&&t.country){const n=t.country.split("|")[0];i=Ne(parseInt(n)).map(f=>`${f.id}|${f.name}`)}return e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{htmlFor:a,className:"block text-sm font-medium text-black mb-1",children:r.text}),e.jsxs(le,{value:t[a]||"",onValueChange:n=>{u(a,n),a==="country"&&t.state&&u("state","")},disabled:a==="state"&&!t.country,children:[e.jsx(de,{className:"mt-1 text-black w-full bg-white rounded-lg shadow-sm",children:e.jsx(me,{placeholder:a==="state"&&!t.country?"Please select a country first":"Select an option"})}),e.jsx(fe,{className:"bg-white rounded-lg shadow-sm",children:i.map(n=>{const[m,f]=n.includes("|")?n.split("|"):[n,n];return e.jsx(he,{value:n,children:f},m)})})]})]});case"confirmation":return e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx(se,{className:"h-12 w-12 text-green-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-black",children:r.text})]});default:return null}},G=()=>s==="user_info"?e.jsx(P,{onBack:j,onGenerate:v,documentType:"Affidavit of Marriage",isGenerating:A}):d.questions.map(a=>O(a)),Y=()=>s==="confirmation"?!0:s==="user_info"?!1:s==="location_selection"?t.country&&t.state&&t.county:s==="applicant_info"?t.current_name&&t.name_assumed_date&&t.former_name&&t.birth_date&&t.current_address:s==="relationship_info"?t.years_known&&t.known_by_current&&t.known_by_former&&t.relationship_to_applicant&&t.reason_for_variance:s==="affiant_info"?t.affiant_name&&t.affidavit_date:!0,J=()=>{var a;return e.jsxs("div",{className:"space-y-4 text-black",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Affidavit of Marriage Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Jurisdiction"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",t.country?$(t.country.split("|")[0]):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"State/Province:"})," ",t.state?H(((a=t.country)==null?void 0:a.split("|")[0])||"",t.state.split("|")[0]):"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"County:"})," ",t.county||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Applicant Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Current Name:"})," ",t.current_name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Former Name:"})," ",t.former_name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Birth Date:"})," ",t.birth_date||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Name Change Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date Name Assumed:"})," ",t.name_assumed_date||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Years Known:"})," ",t.years_known||"Not provided"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:"Affiant Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Affiant Name:"})," ",t.affiant_name||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Relationship:"})," ",t.relationship_to_applicant||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",t.affidavit_date||"Not provided"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Current Address"}),e.jsx("p",{children:t.current_address||"Not provided"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Reason for Name Variance"}),e.jsx("p",{children:t.reason_for_variance||"Not provided"})]})]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-green-50 dark:bg-green-900/10",children:e.jsx("p",{className:"text-center mb-2",children:"By generating this document, you confirm the accuracy of the information provided. This document will serve as your official Affidavit of Marriage."})})]})};return R?e.jsx("div",{className:"bg-gray-50 min-h-0 bg-white rounded-lg shadow-sm p-4",children:e.jsxs(b,{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-sm",children:[e.jsxs(F,{className:"text-center",children:[e.jsx(T,{className:"text-xl text-green-600",children:"Affidavit of Marriage"}),e.jsx(D,{children:"Review your affidavit details below before generating the final document."})]}),e.jsx(w,{className:"space-y-4",children:J()}),e.jsxs(M,{className:"flex justify-between",children:[e.jsx(h,{variant:"outline",onClick:()=>{N({}),l(["location_selection"]),o("location_selection"),C(!1)},children:"Start Over"}),e.jsx(h,{onClick:v,children:"Generate Affidavit"})]})]})}):d?e.jsx("div",{className:"bg-gray-50 min-h-0 bg-white rounded-lg shadow-sm p-4",children:e.jsxs(b,{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-sm",children:[e.jsxs(F,{children:[e.jsx(T,{className:"text-xl",children:d.title}),e.jsxs(D,{children:[d.description,e.jsxs("div",{className:"mt-2 text-sm",children:["Step ",c.length," of ",Object.keys(k).length]})]}),s==="location_selection"&&e.jsx("div",{className:"mt-4",children:e.jsxs(h,{variant:"outline",onClick:()=>window.open("/affidavit-of-marriage-info","_blank"),className:"text-bright-orange-600 border-bright-orange-600 hover:bg-bright-orange-50",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Learn More About Affidavit of Marriage"]})})]}),e.jsx(w,{className:"text-black",children:s==="user_info"?e.jsx(P,{onBack:j,onGenerate:v,documentType:"Affidavit of Marriage",isGenerating:A}):e.jsx("div",{className:"grid grid-cols-1 gap-y-2",children:G()})}),s!=="user_info"&&e.jsxs(M,{className:"flex justify-between",children:[e.jsxs(h,{variant:"outline",onClick:j,disabled:c.length<=1,children:[e.jsx(ae,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx(h,{onClick:()=>B(),disabled:!Y(),children:s==="confirmation"?e.jsxs(e.Fragment,{children:["Complete ",e.jsx(ne,{className:"w-4 h-4 ml-2"})]}):e.jsxs(e.Fragment,{children:["Next ",e.jsx(re,{className:"w-4 h-4 ml-2"})]})})]})]})}):e.jsx("div",{className:"bg-gray-50 min-h-0 bg-white rounded-lg shadow-sm p-4",children:e.jsx(b,{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-sm",children:e.jsxs(w,{className:"text-center p-4",children:[e.jsx("p",{className:"text-red-500",children:"An error occurred. Please refresh the page."}),e.jsx(h,{onClick:()=>{o("location_selection"),l(["location_selection"])},className:"mt-4",children:"Start Over"})]})})})};export{Ee as default};
